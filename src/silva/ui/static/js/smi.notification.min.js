(function(e,t){var n=function(n,r){var i=e(r.notifications.selector),s={themeState:"feedback",life:r.notifications.life,speed:r.notifications.speed===undefined&&"normal"||r.notifications.speed},o=function(t){var n=e.extend({},s);t.category=="error"&&(n.themeState="error"),e.jGrowl(t.message,n)};e(document).on("click","#jGrowl",function(t){e(this).jGrowl("close"),t.stopPropagation(),t.preventDefault()});var u={notify:o,notifies:function(e){t.utils.each(e,u.notify)},page:function(e){return e.notifications!=undefined&&t.utils.each(e.notifications,u.notify),null},error:function(e){return e.notifications!=undefined&&t.utils.each(e.notifications,u.notify),null}};if(!r.notifications.standard&&window.webkitNotifications){var a=function(){return navigator.userAgent.indexOf("Chrome")>-1?!0:!1}(),f;a?f=window.webkitNotifications:f=window.Notification;var l=function(e){var t;a?t=f.checkPermission():t=f.permission;if(t==0||t==="granted")return!0;if(t==1||t==="default")try{return f.requestPermission(function(){}),e===!0}catch(n){return!1}return!1};l(!0)&&e.extend(u,{notify:function(e){if(l(!1)){var t;a?t=f.createNotification("",e.message,""):t=new Notification("",{body:e.message});if(r.notifications.life){var n=function(){setTimeout(function(){t.cancel()},r.notifications.life)};a?t.ondisplay=n:t.onshow=n}t.show()}else o(e)}})}return e(document).bind("refresh-feedback-smi",function(){e.getJSON(r.notifications.url,function(e){e.notifications&&u.notifies(e.notifications)})}),e(document).bind("notify-feedback-smi",function(e,t){typeof t=="array"?u.notifies(t):u.notify(t)}),u};e.extend(t.smi.plugins,{notifications:n})})(jQuery,infrae);