(function(e,t){var n=function(n,r){var i=e(r.selector),s={themeState:"feedback",speed:r.speed===undefined&&"normal"||r.speed},o=function(t){var n=e.extend({},s);t.category=="error"&&(n.themeState="error"),e.jGrowl(t.message,n)};e("#jGrowl").live("click",function(t){e(this).jGrowl("close"),t.stopPropagation(),t.preventDefault()});var u={notify:o,notifies:function(e){t.utils.each(e,u.notify)},page:function(e){return e.notifications!=undefined&&t.utils.each(e.notifications,u.notify),null},error:function(e){return e.notifications!=undefined&&t.utils.each(e.notifications,u.notify),null}};if(!r.standard&&window.webkitNotifications){var a=window.webkitNotifications;e.extend(u,{notify:function(e){var t=a.checkPermission();if(t==0){var n=a.createNotification("",e.message,"");e.autoclose&&(n.ondisplay=function(){setTimeout(function(){n.cancel()},e.autoclose)}),n.show()}else t==1&&a.requestPermission(),o(e)}})}return e(document).bind("refresh-feedback-smi",function(){e.getJSON(r.url,function(e){e.notifications&&u.notifies(e.notifications)})}),e(document).bind("notify-feedback-smi",function(e,t){typeof t=="array"?u.notifies(t):u.notify(t)}),u};e.extend(t.smi.plugins,{notifications:n})})(jQuery,infrae);