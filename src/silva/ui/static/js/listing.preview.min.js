(function($,infrae,jsontemplate){$(document).bind("load-smilisting",function(event,data){var smi=data.smi;if(void 0!==smi.options.listing.preview){var url_template=new jsontemplate.Template(smi.options.listing.preview,{}),preview_template=new jsontemplate.Template('{.section title}<h2>{title|html}</h2>{.end}{.section preview}<div class="preview">{preview}</div>{.end}<div class="type"><span>{type}</span></div>',{}),timer=null,$target=$([]),clear_preview=function(){null!==timer&&(clearTimeout(timer),timer=null),$target.length&&($target.tipsy("hide"),$target=$([]))};$(document).on("mouseenter",".listing tr.item a.preview-icon",function(event){clear_preview(),$target=$(event.target),timer=setTimeout(function(){var info=$target.closest("tr.item").data("smilisting");void 0!==info&&$.ajax({url:url_template.expand({path:info.path})}).done(function(data){$target.is(":visible")&&($target.tipsy({trigger:"manual",html:!0,delayIn:0,title:function(){return preview_template.expand(data)},gravity:"w"}),$target.tipsy("show"))})},1e3)}),$(document).on("mouseleave",".listing tr.item a.preview-icon",clear_preview)}})})(jQuery,infrae,jsontemplate);