(function($,infrae){var ClipBoardManager=function(notifications){var cutted_ids=[],copied_ids=[],clear=function(){var old_length=cutted_ids.length+copied_ids.length;return api.cutted=[],cutted_ids=[],api.copied=[],copied_ids=[],0!=old_length},api={cutted:[],copied:[],update:function(items){var modified=!1;$.each(items,function(i,item){var cutted_index=$.inArray(item.id,cutted_ids),copied_index=$.inArray(item.id,copied_ids);cutted_index>-1&&(api.cutted[cutted_index]=item,modified=!0),copied_index>-1&&(api.copied[copied_index]=item,modified=!0)}),modified&&$("body").trigger("contentchange-smiclipboard")},remove:function(items){var modified=!1;$.each(items,function(i,item){var cutted_index=$.inArray(item,cutted_ids),copied_index=$.inArray(item,copied_ids);cutted_index>-1&&(cutted_ids.splice(cutted_index,1),api.cutted.splice(cutted_index,1),modified=!0),copied_index>-1&&(copied_ids.splice(copied_index,1),api.copied.splice(copied_index,1),modified=!0)}),modified&&$("body").trigger("contentchange-smiclipboard")},clear:function(no_notification){clear()&&$("body").trigger("contentchange-smiclipboard"),no_notification||notifications.notify({message:"Clipboard cleared.",autoclose:4e3})},cut:function(items,no_notification){var count=0;if(clear(),$.each(items,function(i,item){0>$.inArray(item.id,cutted_ids)&&(cutted_ids.push(item.id),api.cutted.push(item),count+=1)}),$("body").trigger("contentchange-smiclipboard"),!no_notification){var message={message:"Cut "+(""+count)+" item(s) in the clipboard.",autoclose:4e3};count||(message.category="error"),notifications.notify(message)}},copy:function(items,no_notification){var count=0;if(clear(),$.each(items,function(i,item){0>$.inArray(item.id,copied_ids)&&(copied_ids.push(item.id),api.copied.push(item),count+=1)}),$("body").trigger("contentchange-smiclipboard"),!no_notification){var message={message:"Copied "+(""+count)+" item(s) in the clipboard.",autoclose:4e3};count||(message.category="error"),notifications.notify(message)}},length:function(){return api.cutted.length+api.copied.length}};return api};infrae.smi.ClipBoardManager=ClipBoardManager})(jQuery,infrae);