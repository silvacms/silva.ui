(function($){$.jGrowl=function(m,o){0==$("#jGrowl").size()&&$('<div id="jGrowl"></div>').addClass(o&&o.position?o.position:$.jGrowl.defaults.position).appendTo("body"),$("#jGrowl").jGrowl(m,o)},$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each(function(){void 0==$(this).data("jGrowl.instance")&&($(this).data("jGrowl.instance",$.extend(new $.fn.jGrowl,{notifications:[],element:null,interval:null})),$(this).data("jGrowl.instance").startup(this)),$.isFunction($(this).data("jGrowl.instance")[m])?$(this).data("jGrowl.instance")[m].apply($(this).data("jGrowl.instance"),$.makeArray(args).slice(1)):$(this).data("jGrowl.instance").create(m,o)})}},$.extend($.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:1e4,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(message,o){var o=$.extend({},this.defaults,o);o.speed!==void 0&&(o.openDuration=o.speed,o.closeDuration=o.speed),this.notifications.push({message:message,options:o}),o.log.apply(this.element,[this.element,message,o])},render:function(notification){var self=this,message=notification.message,o=notification.options;o.themeState=""==o.themeState?"":"jGrowl-"+o.themeState;var notification=$('<div class="jGrowl-notification '+o.themeState+" ui-corner-all"+(void 0!=o.group&&""!=o.group?" "+o.group:"")+'">'+'<div class="jGrowl-close">'+o.closeTemplate+"</div>"+'<div class="jGrowl-header">'+o.header+"</div>"+'<div class="jGrowl-message">'+message+"</div></div>").data("jGrowl",o).addClass(o.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){$(this).parent().trigger("jGrowl.close")}).parent();$(notification).bind("mouseover.jGrowl",function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){0!=o.beforeOpen.apply(notification,[notification,message,o,self.element])&&$(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){0!=o.open.apply(notification,[notification,message,o,self.element])&&("after"==o.glue?$("div.jGrowl-notification:last",self.element).after(notification):$("div.jGrowl-notification:first",self.element).before(notification),$(this).animate(o.animateOpen,o.openDuration,o.easing,function(){!$.browser.msie||1!==parseInt($(this).css("opacity"),10)&&0!==parseInt($(this).css("opacity"),10)||this.style.removeAttribute("filter"),null!=$(this).data("jGrowl")&&($(this).data("jGrowl").created=new Date),$(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){o.afterOpen.apply(notification,[notification,message,o,self.element])}).bind("jGrowl.beforeClose",function(){0!=o.beforeClose.apply(notification,[notification,message,o,self.element])&&$(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){$(this).data("jGrowl.pause",!0),$(this).animate(o.animateClose,o.closeDuration,o.easing,function(){$.isFunction(o.close)?o.close.apply(notification,[notification,message,o,self.element])!==!1&&$(this).remove():$(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=o.corners&&void 0!=$.fn.corner&&$(notification).corner(o.corners),$("div.jGrowl-notification:parent",self.element).size()>1&&0==$("div.jGrowl-closer",self.element).size()&&0!=this.defaults.closer&&$(this.defaults.closerTemplate).addClass("jGrowl-closer ui-corner-all").addClass(this.defaults.theme).appendTo(self.element).animate(o.animateOpen,o.openDuration,o.easing).bind("click.jGrowl",function(){$(this).siblings().trigger("jGrowl.beforeClose"),$.isFunction(self.defaults.closer)&&self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]])})},update:function(){$(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!=$(this).data("jGrowl")&&void 0!=$(this).data("jGrowl").created&&$(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life)<(new Date).getTime()&&1!=$(this).data("jGrowl").sticky&&(void 0==$(this).data("jGrowl.pause")||1!=$(this).data("jGrowl.pause"))&&$(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||$(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),2>$(this.element).find("div.jGrowl-notification:parent").size()&&$(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove()})},startup:function(e){this.element=$(e).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){$(e).data("jGrowl.instance").update()},parseInt(this.defaults.check)),$.browser.msie&&7>parseInt($.browser.version)&&!window.XMLHttpRequest&&$(this.element).addClass("ie6")},shutdown:function(){$(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove(),clearInterval(this.interval)},close:function(){$(this.element).find("div.jGrowl-notification").each(function(){$(this).trigger("jGrowl.beforeClose")})}}),$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults})(jQuery);