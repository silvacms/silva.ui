"use strict";(function($){$.vakata={},$.vakata.css={get_css:function(rule_name,delete_flag,sheet){rule_name=rule_name.toLowerCase();var css_rules=sheet.cssRules||sheet.rules,j=0;do{if(css_rules.length&&j>css_rules.length+5)return!1;if(css_rules[j].selectorText&&css_rules[j].selectorText.toLowerCase()==rule_name)return delete_flag===!0?(sheet.removeRule&&sheet.removeRule(j),sheet.deleteRule&&sheet.deleteRule(j),!0):css_rules[j]}while(css_rules[++j]);return!1},add_css:function(rule_name,sheet){return $.jstree.css.get_css(rule_name,!1,sheet)?!1:(sheet.insertRule?sheet.insertRule(rule_name+" { }",0):sheet.addRule(rule_name,null,0),$.vakata.css.get_css(rule_name))},remove_css:function(rule_name,sheet){return $.vakata.css.get_css(rule_name,!0,sheet)},add_sheet:function(opts){var tmp;if(opts.str)return tmp=document.createElement("style"),tmp.setAttribute("type","text/css"),tmp.styleSheet?(document.getElementsByTagName("head")[0].appendChild(tmp),tmp.styleSheet.cssText=opts.str):(tmp.appendChild(document.createTextNode(opts.str)),document.getElementsByTagName("head")[0].appendChild(tmp)),tmp.sheet||tmp.styleSheet;if(opts.url){if(!document.createStyleSheet)return tmp=document.createElement("link"),tmp.rel="stylesheet",tmp.type="text/css",tmp.media="all",tmp.href=opts.url,document.getElementsByTagName("head")[0].appendChild(tmp),tmp.styleSheet;try{tmp=document.createStyleSheet(opts.url)}catch(e){}}}}})(jQuery),function($){var instances=[],focused_instance=-1,plugins={},prepared_move={},is_ie6=!1;$.fn.jstree=function(settings){var isMethodCall="string"==typeof settings,args=Array.prototype.slice.call(arguments,1),returnValue=this;return!isMethodCall&&$.meta&&args.push($.metadata.get(this).jstree),settings=!isMethodCall&&args.length?$.extend.apply(null,[!0,settings].concat(args)):settings,isMethodCall&&"_"==settings.substring(0,1)?returnValue:(isMethodCall?this.each(function(){var instance=instances[$.data(this,"jstree-instance-id")],methodValue=instance&&$.isFunction(instance[settings])?instance[settings].apply(instance,args):instance;return methodValue!==void 0&&(settings.indexOf(false)||methodValue!==!0&&methodValue!==!1)?(returnValue=methodValue,!1):void 0}):this.each(function(){var instance_id=$.data(this,"jstree-instance-id"),s=!1;instance_id!==void 0&&instances[instance_id]&&instances[instance_id].destroy(),instance_id=parseInt(instances.push({}),10)-1,$.data(this,"jstree-instance-id",instance_id),settings||(settings={}),settings.plugins=$.isArray(settings.plugins)?settings.plugins:$.jstree.defaults.plugins,-1===$.inArray("core",settings.plugins)&&settings.plugins.unshift("core"),s=$.extend(!0,{},$.jstree.defaults,settings),s.plugins=settings.plugins,$.each(plugins,function(i){-1===$.inArray(i,s.plugins)&&(s[i]=null,delete s[i])}),instances[instance_id]=new $.jstree._instance(instance_id,$(this).addClass("jstree jstree-"+instance_id),s),$.each(instances[instance_id]._get_settings().plugins,function(i,val){instances[instance_id].data[val]={}}),$.each(instances[instance_id]._get_settings().plugins,function(i,val){plugins[val]&&plugins[val].__init.apply(instances[instance_id])}),instances[instance_id].init()}),returnValue)},$.jstree={defaults:{plugins:[]},_focused:function(){return instances[focused_instance]||null},_reference:function(needle){if(instances[needle])return instances[needle];var o=$(needle);return o.length||"string"!=typeof needle||(o=$("#"+needle)),o.length?instances[o.closest(".jstree").data("jstree-instance-id")]||null:null},_instance:function(index,container,settings){this.data={core:{}},this.get_settings=function(){return $.extend(!0,{},settings)},this._get_settings=function(){return settings},this.get_index=function(){return index},this.get_container=function(){return container},this._set_settings=function(s){settings=$.extend(!0,{},settings,s)}},_fn:{},plugin:function(pname,pdata){pdata=$.extend({},{__init:$.noop,__destroy:$.noop,_fn:{},defaults:!1},pdata),plugins[pname]=pdata,$.jstree.defaults[pname]=pdata.defaults,$.each(pdata._fn,function(i,val){val.plugin=pname,val.old=$.jstree._fn[i],$.jstree._fn[i]=function(){var rslt,func=val,args=Array.prototype.slice.call(arguments),evnt=new $.Event("before.jstree"),rlbk=!1;do{if(func&&func.plugin&&-1!==$.inArray(func.plugin,this._get_settings().plugins))break;func=func.old}while(func);if(func&&(rslt=this.get_container().triggerHandler(evnt,{func:i,inst:this,args:args}),rslt!==!1))return rslt!==void 0&&(args=rslt),rslt=0===i.indexOf("_")?func.apply(this,args):func.apply($.extend({},this,{__callback:function(data){this.get_container().triggerHandler(i+".jstree",{inst:this,args:args,rslt:data,rlbk:rlbk})},__rollback:function(){return rlbk=this.get_rollback()},__call_old:function(replace_arguments){return func.old.apply(this,replace_arguments?Array.prototype.slice.call(arguments,1):args)}}),args)},$.jstree._fn[i].old=val.old,$.jstree._fn[i].plugin=pname})},rollback:function(rb){rb&&($.isArray(rb)||(rb=[rb]),$.each(rb,function(i,val){instances[val.i].set_rollback(val.h,val.d)}))}},$.jstree._fn=$.jstree._instance.prototype={},$(function(){var u=navigator.userAgent.toLowerCase(),v=(u.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],css_string=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";/msie/.test(u)&&6==parseInt(v,10)&&(is_ie6=!0,css_string+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "),/msie/.test(u)&&7==parseInt(v,10)&&(css_string+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),$.vakata.css.add_sheet({str:css_string})}),$.jstree.plugin("core",{__init:function(){this.data.core.to_open=$.map($.makeArray(this.get_settings().core.initially_open),function(n){return"#"+(""+n).replace(/^#/,"").replace("\\/","/").replace("/","\\/")})},defaults:{html_titles:!1,animation:500,initially_open:[],rtl:!1,strings:{loading:"Loading ...",new_node:"New node"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_settings().core.strings.loading+"</a></li></ul>"),this.data.core.li_height=this.get_container().find("ul li.jstree-closed, ul li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",$.proxy(function(event){var trgt=$(event.target);trgt.is("ins")&&event.pageY-trgt.offset().top<this.data.core.li_height&&this.toggle_node(trgt)},this)).bind("mousedown.jstree",$.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var sel;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){sel=window.getSelection();try{sel.removeAllRanges(),sel.collapse()}catch(err){}}}),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reopen()})},destroy:function(){var i,n=this.get_index(),s=this._get_settings(),_this=this;if($.each(s.plugins,function(i,val){try{plugins[val].__destroy.apply(_this)}catch(err){}}),this.__callback(),this.is_focused())for(i in instances)if(instances.hasOwnProperty(i)&&i!=n){instances[i].set_focus();break}n===focused_instance&&(focused_instance=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),instances[n]=null,delete instances[n]},save_opened:function(){var _this=this;this.data.core.to_open=[],this.get_container().find(".jstree-open").each(function(){_this.data.core.to_open.push("#"+(""+this.id).replace(/^#/,"").replace("\\/","/").replace("/","\\/"))}),this.__callback(_this.data.core.to_open)},reopen:function(is_callback){var _this=this,done=!0,current=[],remaining=[];is_callback||(this.data.core.reopen=!1,this.data.core.refreshing=!0),this.data.core.to_open.length&&($.each(this.data.core.to_open,function(i,val){return"#"==val?!0:($(val).length&&$(val).is(".jstree-closed")?current.push(val):remaining.push(val),void 0)}),current.length&&(this.data.core.to_open=remaining,$.each(current,function(i,val){_this.open_node(val,function(){_this.reopen(!0)},!0)}),done=!1)),done&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){_this.__callback({},_this)},50),this.data.core.refreshing=!1)},refresh:function(obj){var _this=this;this.save_opened(),obj||(obj=-1),obj=this._get_node(obj),obj||(obj=-1),-1!==obj&&obj.children("UL").remove(),this.load_node(obj,function(){_this.__callback({obj:obj}),_this.reopen()})},loaded:function(){this.__callback()},set_focus:function(){var f=$.jstree._focused();f&&f!==this&&f.get_container().removeClass("jstree-focused"),f!==this&&(this.get_container().addClass("jstree-focused"),focused_instance=this.get_index()),this.__callback()},is_focused:function(){return focused_instance==this.get_index()},_get_node:function(obj){var $obj=$(obj,this.get_container());return $obj.is(".jstree")||-1==obj?-1:($obj=$obj.closest("li",this.get_container()),$obj.length?$obj:!1)},_get_next:function(obj,strict){return obj=this._get_node(obj),-1===obj?this.get_container().find("> ul > li:first-child"):obj.length?strict?obj.nextAll("li").size()>0?obj.nextAll("li:eq(0)"):!1:obj.hasClass("jstree-open")?obj.find("li:eq(0)"):obj.nextAll("li").size()>0?obj.nextAll("li:eq(0)"):obj.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(obj,strict){if(obj=this._get_node(obj),-1===obj)return this.get_container().find("> ul > li:last-child");if(!obj.length)return!1;if(strict)return obj.prevAll("li").length>0?obj.prevAll("li:eq(0)"):!1;if(obj.prev("li").length){for(obj=obj.prev("li").eq(0);obj.hasClass("jstree-open");)obj=obj.children("ul:eq(0)").children("li:last");return obj}var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:!1},_get_parent:function(obj){if(obj=this._get_node(obj),-1==obj||!obj.length)return!1;var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:-1},_get_children:function(obj){return obj=this._get_node(obj),-1===obj?this.get_container().children("ul:eq(0)").children("li"):obj.length?obj.children("ul:eq(0)").children("li"):!1},get_path:function(obj,id_mode){var p=[],_this=this;return obj=this._get_node(obj),-1!==obj&&obj&&obj.length?(obj.parentsUntil(".jstree","li").each(function(){p.push(id_mode?this.id:_this.get_text(this))}),p.reverse(),p.push(id_mode?obj.attr("id"):this.get_text(obj)),p):!1},is_open:function(obj){return obj=this._get_node(obj),obj&&-1!==obj&&obj.hasClass("jstree-open")},is_closed:function(obj){return obj=this._get_node(obj),obj&&-1!==obj&&obj.hasClass("jstree-closed")},is_leaf:function(obj){return obj=this._get_node(obj),obj&&-1!==obj&&obj.hasClass("jstree-leaf")},open_node:function(obj,callback,skip_animation){if(obj=this._get_node(obj),!obj.length)return!1;if(!obj.hasClass("jstree-closed"))return callback&&callback.call(),!1;var s=skip_animation||is_ie6?0:this._get_settings().core.animation,t=this;this._is_loaded(obj)?(s&&obj.children("ul").css("display","none"),obj.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),s&&obj.children("ul").stop(!0).slideDown(s,function(){this.style.display=""}),this.__callback({obj:obj}),callback&&callback.call()):(obj.children("a").addClass("jstree-loading"),this.load_node(obj,function(){t.open_node(obj,callback,skip_animation)},callback))},close_node:function(obj,skip_animation){obj=this._get_node(obj);var s=skip_animation||is_ie6?0:this._get_settings().core.animation;return obj.length&&obj.hasClass("jstree-open")?(s&&obj.children("ul").attr("style","display:block !important"),obj.removeClass("jstree-open").addClass("jstree-closed"),s&&obj.children("ul").stop(!0).slideUp(s,function(){this.style.display=""}),this.__callback({obj:obj}),void 0):!1},toggle_node:function(obj){return obj=this._get_node(obj),obj.hasClass("jstree-closed")?this.open_node(obj):obj.hasClass("jstree-open")?this.close_node(obj):void 0},open_all:function(obj,original_obj){obj=obj?this._get_node(obj):this.get_container(),obj&&-1!==obj||(obj=this.get_container()),original_obj?obj=obj.find("li.jstree-closed"):(original_obj=obj,obj=obj.is(".jstree-closed")?obj.find("li.jstree-closed").andSelf():obj.find("li.jstree-closed"));var _this=this;obj.each(function(){var __this=this;_this._is_loaded(this)?_this.open_node(this,!1,!0):_this.open_node(this,function(){_this.open_all(__this,original_obj)},!0)}),0===original_obj.find("li.jstree-closed").length&&this.__callback({obj:original_obj})},close_all:function(obj){var _this=this;obj=obj?this._get_node(obj):this.get_container(),obj&&-1!==obj||(obj=this.get_container()),obj.find("li.jstree-open").andSelf().each(function(){_this.close_node(this)}),this.__callback({obj:obj})},clean_node:function(obj){obj=obj&&-1!=obj?$(obj):this.get_container(),obj=obj.is("li")?obj.find("li").andSelf():obj.find("li"),obj.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),obj.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:obj})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(html,data){this.get_container().empty().append(html),this.data=data,this.__callback()},load_node:function(obj){this.__callback({obj:obj})},_is_loaded:function(){return!0},create_node:function(obj,position,js,callback,is_loaded){obj=this._get_node(obj),position=position===void 0?"last":position;var tmp,d=$("<li>"),s=this._get_settings().core;if(-1!==obj&&!obj.length)return!1;if(!is_loaded&&!this._is_loaded(obj))return this.load_node(obj,function(){this.create_node(obj,position,js,callback,!0)}),!1;switch(this.__rollback(),"string"==typeof js&&(js={data:js}),js||(js={}),js.attr&&d.attr(js.attr),js.state&&d.addClass("jstree-"+js.state),js.data||(js.data=s.strings.new_node),$.isArray(js.data)||(tmp=js.data,js.data=[],js.data.push(tmp)),$.each(js.data,function(i,m){tmp=$("<a>"),$.isFunction(m)&&(m=m.call(this,js)),"string"==typeof m?tmp.attr("href","#")[s.html_titles?"html":"text"](m):(m.attr||(m.attr={}),m.attr.href||(m.attr.href="#"),tmp.attr(m.attr)[s.html_titles?"html":"text"](m.title),m.language&&tmp.addClass(m.language)),tmp.prepend("<ins class='jstree-icon'>&#160;</ins>"),m.icon&&(-1===m.icon.indexOf("/")?tmp.children("ins").addClass(m.icon):tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat")),d.append(tmp)}),d.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===obj&&(obj=this.get_container(),"before"===position&&(position="first"),"after"===position&&(position="last")),position){case"before":obj.before(d),tmp=this._get_parent(obj);break;case"after":obj.after(d),tmp=this._get_parent(obj);break;case"inside":case"first":obj.children("ul").length||obj.append("<ul>"),obj.children("ul").prepend(d),tmp=obj;break;case"last":obj.children("ul").length||obj.append("<ul>"),obj.children("ul").append(d),tmp=obj;break;default:obj.children("ul").length||obj.append("<ul>"),position||(position=0),tmp=obj.children("ul").children("li").eq(position),tmp.length?tmp.before(d):obj.children("ul").append(d),tmp=obj}return(-1===tmp||tmp.get(0)===this.get_container().get(0))&&(tmp=-1),this.clean_node(tmp),this.__callback({obj:d,parent:tmp}),callback&&callback.call(this,d),d},get_text:function(obj){if(obj=this._get_node(obj),!obj.length)return!1;var s=this._get_settings().core.html_titles;return obj=obj.children("a:eq(0)"),s?(obj=obj.clone(),obj.children("INS").remove(),obj.html()):(obj=obj.contents().filter(function(){return 3==this.nodeType})[0],obj.nodeValue)},set_text:function(obj,val){if(obj=this._get_node(obj),!obj.length)return!1;if(obj=obj.children("a:eq(0)"),this._get_settings().core.html_titles){var tmp=obj.children("INS").clone();return obj.html(val).prepend(tmp),this.__callback({obj:obj,name:val}),!0}return obj=obj.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:obj,name:val}),obj.nodeValue=val},rename_node:function(obj,val){obj=this._get_node(obj),this.__rollback(),obj&&obj.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:obj,name:val})},delete_node:function(obj){if(obj=this._get_node(obj),!obj.length)return!1;this.__rollback();var p=this._get_parent(obj),prev=this._get_prev(obj);return obj=obj.remove(),-1!==p&&0===p.find("> ul > li").length&&p.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(p),this.__callback({obj:obj,prev:prev}),obj},prepare_move:function(o,r,pos,cb,is_cb){var p={};if(p.ot=$.jstree._reference(p.o)||this,p.o=p.ot._get_node(o),p.r=-1===r?-1:this._get_node(r),p.p=p===void 0?"last":pos,!is_cb&&prepared_move.o&&prepared_move.o[0]===p.o[0]&&prepared_move.r[0]===p.r[0]&&prepared_move.p===p.p)return this.__callback(prepared_move),cb&&cb.call(this,prepared_move),void 0;if(p.ot=$.jstree._reference(p.o)||this,p.rt=-1===r?p.ot:$.jstree._reference(p.r)||this,-1===p.r)switch(p.cr=-1,p.p){case"first":case"before":case"inside":p.cp=0;break;case"after":case"last":p.cp=p.rt.get_container().find(" > ul > li").length;break;default:p.cp=p.p}else{if(!/^(before|after)$/.test(p.p)&&!this._is_loaded(p.r))return this.load_node(p.r,function(){this.prepare_move(o,r,pos,cb,!0)});switch(p.p){case"before":p.cp=p.r.index(),p.cr=p.rt._get_parent(p.r);break;case"after":p.cp=p.r.index()+1,p.cr=p.rt._get_parent(p.r);break;case"inside":case"first":p.cp=0,p.cr=p.r;break;case"last":p.cp=p.r.find(" > ul > li").length,p.cr=p.r;break;default:p.cp=p.p,p.cr=p.r}}p.np=-1==p.cr?p.rt.get_container():p.cr,p.op=p.ot._get_parent(p.o),p.or=p.np.find(" > ul > li:nth-child("+(p.cp+1)+")"),prepared_move=p,this.__callback(prepared_move),cb&&cb.call(this,prepared_move)},check_move:function(){var obj=prepared_move,ret=!0;return obj.or[0]===obj.o[0]?!1:(obj.o.each(function(){return-1!==obj.r.parentsUntil(".jstree").andSelf().filter("li").index(this)?(ret=!1,!1):void 0}),ret)},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){if(!is_prepared)return this.prepare_move(obj,ref,position,function(p){this.move_node(p,!1,!1,is_copy,!0,skip_check)});if(!skip_check&&!this.check_move())return!1;this.__rollback();var o=!1;is_copy?(o=obj.o.clone(),o.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):o=obj.o,obj.or.length?obj.or.before(o):(obj.np.children("ul").length||$("<ul>").appendTo(obj.np),obj.np.children("ul:eq(0)").append(o));try{obj.ot.clean_node(obj.op),obj.rt.clean_node(obj.np),obj.op.find("> ul > li").length||obj.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}return is_copy&&(prepared_move.cy=!0,prepared_move.oc=o),this.__callback(prepared_move),prepared_move},_get_move:function(){return prepared_move}}})}(jQuery),function($){$.jstree.plugin("ui",{__init:function(){this.data.ui.selected=$(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",$.proxy(function(event){event.preventDefault(),this.select_node(event.currentTarget,!0,event)},this)).delegate("a","mouseenter.jstree",$.proxy(function(event){this.hover_node(event.target)},this)).delegate("a","mouseleave.jstree",$.proxy(function(event){this.dehover_node(event.target)},this)).bind("reopen.jstree",$.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",$.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",$.proxy(function(){this.reselect()},this)).bind("close_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui,obj=this._get_node(data.rslt.obj),clk=obj&&obj.length?obj.children("ul").find(".jstree-clicked"):$(),_this=this;s.selected_parent_close!==!1&&clk.length&&clk.each(function(){_this.deselect_node(this),"select_parent"===s.selected_parent_close&&_this.select_node(obj)})},this)).bind("delete_node.jstree",$.proxy(function(event,data){var s=this._get_settings().ui.select_prev_on_delete,obj=this._get_node(data.rslt.obj),clk=obj&&obj.length?obj.find(".jstree-clicked"):[],_this=this;clk.each(function(){_this.deselect_node(this)}),s&&clk.length&&this.select_node(data.rslt.prev)},this)).bind("move_node.jstree",$.proxy(function(event,data){data.rslt.cy&&data.rslt.oc.find(".jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",selected_parent_close:"select_parent",select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(obj,allow_multiple){if(obj===void 0||null===obj)return allow_multiple?this.data.ui.selected:this.data.ui.last_selected;var $obj=$(obj,this.get_container());return $obj.is(".jstree")||-1==obj?-1:($obj=$obj.closest("li",this.get_container()),$obj.length?$obj:!1)},save_selected:function(){var _this=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){_this.data.ui.to_select.push("#"+(""+this.id).replace(/^#/,"").replace("\\/","/").replace("/","\\/"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+(""+n).replace(/^#/,"").replace("\\/","/").replace("/","\\/")}),this.deselect_all(),$.each(s,function(i,val){val&&"#"!==val&&_this.select_node(val)}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(obj){return obj=this._get_node(obj),obj.length?(obj.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=obj.children("a").addClass("jstree-hovered").parent(),this.__callback({obj:obj}),void 0):!1},dehover_node:function(){var p,obj=this.data.ui.hovered;return obj&&obj.length?(p=obj.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===p[0]&&(this.data.ui.hovered=null),this.__callback({obj:obj}),void 0):!1},select_node:function(obj,check,e){if(obj=this._get_node(obj),-1==obj||!obj||!obj.length)return!1;var s=this._get_settings().ui,is_multiple="on"==s.select_multiple_modifier||s.select_multiple_modifier!==!1&&e&&e[s.select_multiple_modifier+"Key"],is_selected=this.is_selected(obj),proceed=!0;if(check){if(s.disable_selecting_children&&is_multiple&&obj.parents("li",this.get_container()).children(".jstree-clicked").length)return!1;switch(proceed=!1,!0){case is_selected&&!is_multiple:this.deselect_all(),is_selected=!1,proceed=!0;break;case!is_selected&&!is_multiple:(-1==s.select_limit||s.select_limit>0)&&(this.deselect_all(),proceed=!0);break;case is_selected&&is_multiple:this.deselect_node(obj);break;case!is_selected&&is_multiple:(-1==s.select_limit||this.data.ui.selected.length+1<=s.select_limit)&&(proceed=!0)}}proceed&&!is_selected&&(obj.children("a").addClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.add(obj),this.data.ui.last_selected=obj,this.__callback({obj:obj}))},deselect_node:function(obj){return obj=this._get_node(obj),obj.length?(this.is_selected(obj)&&(obj.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(obj),this.data.ui.last_selected.get(0)===obj.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:obj})),void 0):!1},toggle_select:function(obj){return obj=this._get_node(obj),obj.length?(this.is_selected(obj)?this.deselect_node(obj):this.select_node(obj),void 0):!1},is_selected:function(obj){return this.data.ui.selected.index(this._get_node(obj))>=0},get_selected:function(context){return context?$(context).find(".jstree-clicked").parent():this.data.ui.selected},deselect_all:function(context){context?$(context).find(".jstree-clicked").removeClass("jstree-clicked"):this.get_container().find(".jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=$([]),this.data.ui.last_selected=!1,this.__callback()}}}),$.jstree.defaults.plugins.push("ui")}(jQuery),function($){$.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",$.proxy(function(e,data){if(this._get_settings().crrm.move.open_onmove){var t=this;data.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(obj,callback){obj=this._get_node(obj);var rtl=this._get_settings().core.rtl,w=this._get_settings().crrm.input_width_limit,w1=obj.children("ins").width(),w2=obj.find("> a:visible > ins").width()*obj.find("> a:visible > ins").length,t=this.get_text(obj),h1=$("<div>",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h2=obj.css("position","relative").append($("<input>",{value:t,css:{padding:"0",border:"1px solid silver",position:"absolute",left:rtl?"auto":w1+w2+4+"px",right:rtl?w1+w2+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:$.proxy(function(){var i=obj.children("input"),v=i.val();""===v&&(v=t),i.remove(),this.set_text(obj,t),this.rename_node(obj,v),callback.call(this,obj,v,t),obj.css("position","")},this),keyup:function(event){var key=event.keyCode||event.which;return 27==key?(this.value=t,this.blur(),void 0):13==key?(this.blur(),void 0):(h2.width(Math.min(h1.text("pW"+this.value).width(),w)),void 0)}})).children("input");this.set_text(obj,""),h1.css({fontFamily:h2.css("fontFamily")||"",fontSize:h2.css("fontSize")||"",fontWeight:h2.css("fontWeight")||"",fontStyle:h2.css("fontStyle")||"",fontStretch:h2.css("fontStretch")||"",fontVariant:h2.css("fontVariant")||"",letterSpacing:h2.css("letterSpacing")||"",wordSpacing:h2.css("wordSpacing")||""}),h2.width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()},rename:function(obj){obj=this._get_node(obj),this.__rollback();var f=this.__callback;this._show_input(obj,function(obj,new_name,old_name){f.call(this,{obj:obj,new_name:new_name,old_name:old_name})})},create:function(obj,position,js,callback,skip_rename){var t,_this=this;return obj=this._get_node(obj),obj||(obj=-1),this.__rollback(),t=this.create_node(obj,position,js,function(t){var p=this._get_parent(t),pos=$(t).index();callback&&callback.call(this,t),p.length&&p.hasClass("jstree-closed")&&this.open_node(p,!1,!0),skip_rename?_this.__callback({obj:t,name:this.get_text(t),parent:p,position:pos}):this._show_input(t,function(obj,new_name){_this.__callback({obj:obj,name:new_name,parent:p,position:pos})})})},remove:function(obj){obj=this._get_node(obj,!0),this.__rollback(),this.delete_node(obj),this.__callback({obj:obj})},check_move:function(){if(!this.__call_old())return!1;var s=this._get_settings().crrm.move;return s.check_move.call(this,this._get_move())?!0:!1},move_node:function(obj,ref,position,is_copy,is_prepared,skip_check){var s=this._get_settings().crrm.move;return is_prepared?((s.always_copy===!0||"multitree"===s.always_copy&&obj.rt.get_index()!==obj.ot.get_index())&&(is_copy=!0),this.__call_old(!0,obj,ref,position,is_copy,!0,skip_check),void 0):(position||(position=s.default_position),"inside"!==position||s.default_position.match(/^(before|after)$/)||(position=s.default_position),this.__call_old(!0,obj,ref,position,is_copy,!1,skip_check))},cut:function(obj){return obj=this._get_node(obj),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1,obj&&obj.length?(this.data.crrm.ct_nodes=obj,void 0):!1},copy:function(obj){return obj=this._get_node(obj),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1,obj&&obj.length?(this.data.crrm.cp_nodes=obj,void 0):!1},paste:function(obj){return obj=this._get_node(obj),obj&&obj.length?this.data.crrm.ct_nodes||this.data.crrm.cp_nodes?(this.data.crrm.ct_nodes&&this.move_node(this.data.crrm.ct_nodes,obj),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,obj,!1,!0),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1,void 0):!1:!1}}}),$.jstree.defaults.plugins.push("crrm")}(jQuery),function($){var themes_loaded=[];$.jstree._themes=!1,$.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",$.proxy(function(){var s=this._get_settings().themes;this.data.themes.dots=s.dots,this.data.themes.icons=s.icons,this.set_theme(s.theme,s.url)},this)).bind("loaded.jstree",$.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(theme_name,theme_url){return theme_name?(theme_url||(theme_url=$.jstree._themes+theme_name+"/style.css"),-1==$.inArray(theme_url,themes_loaded)&&($.vakata.css.add_sheet({url:theme_url,rel:"jstree"}),themes_loaded.push(theme_url)),this.data.themes.theme!=theme_name&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=theme_name),this.get_container().addClass("jstree-"+theme_name),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback(),void 0):!1},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),$(function(){$.jstree._themes===!1&&$("script").each(function(){return(""+this.src).match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)?($.jstree._themes=(""+this.src).replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1):void 0}),$.jstree._themes===!1&&($.jstree._themes="themes/")}),$.jstree.defaults.plugins.push("themes")}(jQuery),function($){function exec(i,event){var tmp,f=$.jstree._focused();return f&&f.data&&f.data.hotkeys&&f.data.hotkeys.enabled&&(tmp=f._get_settings().hotkeys[i])?tmp.call(f,event):void 0}var bound=[];$.jstree.plugin("hotkeys",{__init:function(){if($.hotkeys===void 0)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";$.each(this._get_settings().hotkeys,function(i){-1==$.inArray(i,bound)&&($(document).bind("keydown",i,function(event){return exec(i,event)
}),bound.push(i))}),this.enable_hotkeys()},defaults:{up:function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(o)),!1},down:function(){var o=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(o)),!1},left:function(){var o=this.data.ui.hovered||this.data.ui.last_selected;return o?(o.hasClass("jstree-open")?this.close_node(o):this.hover_node(this._get_prev(o)),!1):void 0},right:function(){var o=this.data.ui.hovered||this.data.ui.last_selected;return o&&o.length?(o.hasClass("jstree-closed")?this.open_node(o):this.hover_node(this._get_next(o)),!1):void 0},space:function(){return this.data.ui.hovered?(this.data.ui.hovered.children("a:eq(0)").click(),!1):void 0},"ctrl+space":function(event){return event.type="click",this.data.ui.hovered?(this.data.ui.hovered.children("a:eq(0)").trigger(event),!1):void 0},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function($){$.jstree.plugin("json_data",{defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_json(obj,function(){_this.__callback({obj:obj}),s_call.call(this)},e_call)},_is_loaded:function(obj){var d,s=this._get_settings().json_data;return obj=this._get_node(obj),obj&&-1!==obj&&s.progressive_render&&!obj.is(".jstree-open, .jstree-leaf")&&0===obj.children("ul").children("li").length&&obj.data("jstree-children")?(d=this._parse_json(obj.data("jstree-children")),d&&(obj.append(d),$.removeData(obj,"jstree-children")),this.clean_node(obj),!0):-1==obj||!obj||!s.ajax||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_json:function(obj,s_call,e_call){var d,s=this.get_settings().json_data,error_func=function(){},success_func=function(){};if(obj=this._get_node(obj),obj&&-1!==obj){if(obj.data("jstree-is-loading"))return;obj.data("jstree-is-loading",!0)}switch(!0){case!s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||-1===obj):obj&&-1!=obj||(d=this._parse_json(s.data),d?(this.get_container().children("ul").empty().append(d.children()),this.clean_node()):s.correct_state&&this.get_container().children("ul").empty()),s_call&&s_call.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&-1!==obj:error_func=function(x,t,e){var ef=this.get_settings().json_data.ajax.error;ef&&ef.call(this,x,t,e),-1!=obj&&obj.length?(obj.children(".jstree-loading").removeClass("jstree-loading"),obj.data("jstree-is-loading",!1),"success"===t&&s.correct_state&&obj.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")):"success"===t&&s.correct_state&&this.get_container().children("ul").empty(),e_call&&e_call.call(this)},success_func=function(d,t,x){var sf=this.get_settings().json_data.ajax.success;return sf&&(d=sf.call(this,d,t,x)||d),""===d||!$.isArray(d)&&!$.isPlainObject(d)?error_func.call(this,x,t,""):(d=this._parse_json(d),d?(-1!==obj&&obj?(obj.append(d).children(".jstree-loading").removeClass("jstree-loading"),obj.data("jstree-is-loading",!1)):this.get_container().children("ul").empty().append(d.children()),this.clean_node(obj),s_call&&s_call.call(this)):-1!==obj&&obj?(obj.children(".jstree-loading").removeClass("jstree-loading"),obj.data("jstree-is-loading",!1),s.correct_state&&(obj.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),s_call&&s_call.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),s_call&&s_call.call(this)),void 0)},s.ajax.context=this,s.ajax.error=error_func,s.ajax.success=success_func,s.ajax.dataType||(s.ajax.dataType="json"),$.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,obj)),$.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,obj)),$.ajax(s.ajax)}},_parse_json:function(js,is_callback){var tmp,i,j,ul1,ul2,d=!1,p=this._get_settings(),s=p.json_data,t=p.core.html_titles;if(!js)return d;if($.isFunction(js)&&(js=js.call(this)),$.isArray(js)){if(d=$(),!js.length)return!1;for(i=0,j=js.length;j>i;i++)tmp=this._parse_json(js[i],!0),tmp.length&&(d=d.add(tmp))}else{if("string"==typeof js&&(js={data:js}),!js.data&&""!==js.data)return d;d=$("<li>"),js.attr&&d.attr(js.attr),js.metadata&&d.data("jstree",js.metadata),js.state&&d.addClass("jstree-"+js.state),$.isArray(js.data)||(tmp=js.data,js.data=[],js.data.push(tmp)),$.each(js.data,function(i,m){tmp=$("<a>"),$.isFunction(m)&&(m=m.call(this,js)),"string"==typeof m?tmp.attr("href","#")[t?"html":"text"](m):(m.attr||(m.attr={}),m.attr.href||(m.attr.href="#"),tmp.attr(m.attr)[t?"html":"text"](m.title),m.language&&tmp.addClass(m.language)),tmp.prepend("<ins class='jstree-icon'>&#160;</ins>"),!m.icon&&js.icon&&(m.icon=js.icon),m.icon&&(-1===m.icon.indexOf("/")?tmp.children("ins").addClass(m.icon):tmp.children("ins").css("background","url('"+m.icon+"') center center no-repeat")),d.append(tmp)}),d.prepend("<ins class='jstree-icon'>&#160;</ins>"),js.children&&(s.progressive_render&&"open"!==js.state?d.addClass("jstree-closed").data("jstree-children",js.children):($.isFunction(js.children)&&(js.children=js.children.call(this,js)),$.isArray(js.children)&&js.children.length&&(tmp=this._parse_json(js.children,!0),tmp.length&&(ul2=$("<ul>"),ul2.append(tmp),d.append(ul2)))))}return is_callback||(ul1=$("<ul>"),ul1.append(d),d=ul1),d},get_json:function(obj,li_attr,a_attr,is_callback){var tmp1,tmp2,li,a,t,lang,result=[],s=this._get_settings(),_this=this;return obj=this._get_node(obj),obj&&-1!==obj||(obj=this.get_container().find("> ul > li")),li_attr=$.isArray(li_attr)?li_attr:["id","class"],!is_callback&&this.data.types&&li_attr.push(s.types.type_attr),a_attr=$.isArray(a_attr)?a_attr:[],obj.each(function(){li=$(this),tmp1={data:[]},li_attr.length&&(tmp1.attr={}),$.each(li_attr,function(i,v){tmp2=li.attr(v),tmp2&&tmp2.length&&tmp2.replace(/jstree[^ ]*|$/gi,"").length&&(tmp1.attr[v]=tmp2.replace(/jstree[^ ]*|$/gi,""))}),li.hasClass("jstree-open")&&(tmp1.state="open"),li.hasClass("jstree-closed")&&(tmp1.state="closed"),a=li.children("a"),a.each(function(){t=$(this),a_attr.length||-1!==$.inArray("languages",s.plugins)||t.children("ins").get(0).style.backgroundImage.length||t.children("ins").get(0).className&&t.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(lang=!1,-1!==$.inArray("languages",s.plugins)&&$.isArray(s.languages)&&s.languages.length&&$.each(s.languages,function(l,lv){return t.hasClass(lv)?(lang=lv,!1):void 0}),tmp2={attr:{},title:_this.get_text(t,lang)},$.each(a_attr,function(k,z){tmp1.attr[z]=(t.attr(z)||"").replace(/jstree[^ ]*|$/gi,"")}),$.each(s.languages,function(k,z){return t.hasClass(z)?(tmp2.language=z,!0):void 0}),t.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(tmp2.icon=t.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"")),t.children("ins").get(0).style.backgroundImage.length&&(tmp2.icon=t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):tmp2=_this.get_text(t),a.length>1?tmp1.data.push(tmp2):tmp1.data=tmp2}),li=li.find("> ul > li"),li.length&&(tmp1.children=_this.get_json(li,li_attr,a_attr,!0)),result.push(tmp1)}),result}}})}(jQuery),function($){$.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var langs=this._get_settings().languages,st=!1,selector=".jstree-"+this.get_index()+" a";if(!$.isArray(langs)||0===langs.length)return!1;if(-1==$.inArray(i,langs)){if(!langs[i])return!1;i=langs[i]}return i==this.data.languages.current_language?!0:(st=$.vakata.css.get_css(selector+"."+this.data.languages.current_language,!1,this.data.languages.language_css),st!==!1&&(st.style.display="none"),st=$.vakata.css.get_css(selector+"."+i,!1,this.data.languages.language_css),st!==!1&&(st.style.display=""),this.data.languages.current_language=i,this.__callback(i),!0)},get_lang:function(){return this.data.languages.current_language},get_text:function(obj,lang){if(obj=this._get_node(obj)||this.data.ui.last_selected,!obj.size())return!1;var langs=this._get_settings().languages,s=this._get_settings().core.html_titles;return $.isArray(langs)&&langs.length?(lang=lang&&-1!=$.inArray(lang,langs)?lang:this.data.languages.current_language,obj=obj.children("a."+lang)):obj=obj.children("a:eq(0)"),s?(obj=obj.clone(),obj.children("INS").remove(),obj.html()):(obj=obj.contents().filter(function(){return 3==this.nodeType})[0],obj.nodeValue)},set_text:function(obj,val,lang){if(obj=this._get_node(obj)||this.data.ui.last_selected,!obj.size())return!1;var tmp,langs=this._get_settings().languages,s=this._get_settings().core.html_titles;return $.isArray(langs)&&langs.length?(lang=lang&&-1!=$.inArray(lang,langs)?lang:this.data.languages.current_language,obj=obj.children("a."+lang)):obj=obj.children("a:eq(0)"),s?(tmp=obj.children("INS").clone(),obj.html(val).prepend(tmp),this.__callback({obj:obj,name:val,lang:lang}),!0):(obj=obj.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:obj,name:val,lang:lang}),obj.nodeValue=val)},_load_css:function(){var ln,langs=this._get_settings().languages,str="/* languages css */",selector=".jstree-"+this.get_index()+" a";if($.isArray(langs)&&langs.length){for(this.data.languages.current_language=langs[0],ln=0;langs.length>ln;ln++)str+=selector+"."+langs[ln]+" {",langs[ln]!=this.data.languages.current_language&&(str+=" display:none; "),str+=" } ";this.data.languages.language_css=$.vakata.css.add_sheet({str:str})}},create_node:function(obj,position,js,callback){var t=this.__call_old(!0,obj,position,js,function(t){var ln,langs=this._get_settings().languages,a=t.children("a");if($.isArray(langs)&&langs.length){for(ln=0;langs.length>ln;ln++)a.is("."+langs[ln])||t.append(a.eq(0).clone().removeClass(langs.join(" ")).addClass(langs[ln]));a.not("."+langs.join(", .")).remove()}callback&&callback.call(this,t)});return t}}})}(jQuery),function($){$.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var obj=this._get_node(data.rslt.obj);obj=-1===obj?this.get_container().children("ul"):obj.children("ul"),this.sort(obj)},this)).bind("rename_node.jstree",$.proxy(function(e,data){this.sort(data.rslt.obj.parent())},this)).bind("move_node.jstree",$.proxy(function(e,data){var m=-1==data.rslt.np?this.get_container():data.rslt.np;this.sort(m.children("ul"))},this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(obj){var s=this._get_settings().sort,t=this;obj.append($.makeArray(obj.children("li")).sort($.proxy(s,t))),obj.find("> li > ul").each(function(){t.sort($(this))}),this.clean_node(obj)}}})}(jQuery),function($){$.jstree.plugin("checkbox",{__init:function(){this.select_node=this.deselect_node=this.deselect_all=$.noop,this.get_selected=this.get_checked,this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",$.proxy(function(e,data){this._prepare_checkboxes(data.rslt.obj)},this)).bind("loaded.jstree",$.proxy(function(){this._prepare_checkboxes()},this)).delegate("a","click.jstree",$.proxy(function(e){this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.save_selected(),this.data.cookies&&this.save_cookie("select_node"),e.preventDefault()},this))},__destroy:function(){this.get_container().find(".jstree-checkbox").remove()},_fn:{_prepare_checkboxes:function(obj){obj=obj&&-1!=obj?this._get_node(obj):this.get_container();var c,t,_this=this;obj.each(function(){t=$(this),c=t.is("li")&&t.hasClass("jstree-checked")?"jstree-checked":"jstree-unchecked",t.find("a").not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(c)}),obj.is("li")?this._repair_state(obj):obj.find("> ul > li").each(function(){_this._repair_state(this)})},change_state:function(obj,state){obj=this._get_node(obj),state=state===!1||state===!0?state:obj.hasClass("jstree-checked"),state?obj.find("li").andSelf().removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"):(obj.find("li").andSelf().removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),this.data.ui&&(this.data.ui.last_selected=obj),this.data.checkbox.last_selected=obj),obj.parentsUntil(".jstree","li").each(function(){var $this=$(this);if(state){if($this.children("ul").children(".jstree-checked, .jstree-undetermined").length)return $this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),!1;$this.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked")}else{if($this.children("ul").children(".jstree-unchecked, .jstree-undetermined").length)return $this.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),!1;$this.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked")}}),this.data.ui&&(this.data.ui.selected=this.get_checked()),this.__callback(obj)},check_node:function(obj){this.change_state(obj,!1)},uncheck_node:function(obj){this.change_state(obj,!0)},check_all:function(){var _this=this;this.get_container().children("ul").children("li").each(function(){_this.check_node(this,!1)})},uncheck_all:function(){var _this=this;this.get_container().children("ul").children("li").each(function(){_this.change_state(this,!0)})},is_checked:function(obj){return obj=this._get_node(obj),obj.length?obj.is(".jstree-checked"):!1},get_checked:function(obj){return obj=obj&&-1!==obj?this._get_node(obj):this.get_container(),obj.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(obj){return obj=obj&&-1!==obj?this._get_node(obj):this.get_container(),obj.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(obj){if(obj=this._get_node(obj).first(),obj.length){var a=obj.find("> ul > .jstree-checked").length,b=obj.find("> ul > .jstree-undetermined").length,c=obj.find("> ul > li").length;0===c?obj.hasClass("jstree-undetermined")&&this.check_node(obj):0===a&&0===b?this.uncheck_node(obj):a===c?this.check_node(obj):obj.parentsUntil(".jstree","li").removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined")}},reselect:function(){if(this.data.ui){var _this=this,s=this.data.ui.to_select;s=$.map($.makeArray(s),function(n){return"#"+(""+n).replace(/^#/,"").replace("\\/","/").replace("/","\\/")}),this.deselect_all(),$.each(s,function(i,val){_this.check_node(val)}),this.__callback()}}}})}(jQuery),function($){$.jstree.plugin("types",{__init:function(){var s=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",$.proxy(function(){var types=s.types,attr=s.type_attr,icons_css="",_this=this;$.each(types,function(i,tp){return $.each(tp,function(k){/^(max_depth|max_children|icon|valid_children)$/.test(k)||_this.data.types.attach_to.push(k)}),tp.icon?((tp.icon.image||tp.icon.position)&&(icons_css+="default"==i?".jstree-"+_this.get_index()+" a > .jstree-icon { ":".jstree-"+_this.get_index()+" li["+attr+"="+i+"] > a > .jstree-icon { ",tp.icon.image&&(icons_css+=" background-image:url("+tp.icon.image+"); "),icons_css+=tp.icon.position?" background-position:"+tp.icon.position+"; ":" background-position:0 0; ",icons_css+="} "),void 0):!0}),""!=icons_css&&$.vakata.css.add_sheet({str:icons_css})},this)).bind("before.jstree",$.proxy(function(e,data){if(-1!==$.inArray(data.func,this.data.types.attach_to)){var s=this._get_settings().types.types,t=this._get_type(data.args[0]);if((s[t]&&s[t][data.func]!==void 0||s["default"]&&s["default"][data.func]!==void 0)&&!this._check(data.func,data.args[0]))return e.stopImmediatePropagation(),!1}},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_get_type:function(obj){return obj=this._get_node(obj),obj&&obj.length?obj.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(str,obj){return obj=this._get_node(obj),obj.length&&str?obj.attr(this._get_settings().types.type_attr,str):!1},_check:function(rule,obj,opts){var v=!1,t=this._get_type(obj),d=0,_this=this,s=this._get_settings().types;if(-1===obj){if(!s[rule])return;v=s[rule]}else{if(t===!1)return;s.types[t]&&s.types[t][rule]?v=s.types[t][rule]:s.types["default"]&&s.types["default"][rule]&&(v=s.types["default"][rule])}return $.isFunction(v)&&(v=v.call(this,obj)),"max_depth"===rule&&-1!==obj&&opts!==!1&&-2!==s.max_depth&&0!==v&&this._get_node(obj).children("a:eq(0)").parentsUntil(".jstree","li").each(function(i){return-1!==s.max_depth&&0>=s.max_depth-(i+1)?(v=0,!1):(d=0===i?v:_this._check(rule,this,!1),-1!==d&&0>=d-(i+1)?(v=0,!1):(d>=0&&(v>d-(i+1)||0>v)&&(v=d-(i+1)),s.max_depth>=0&&(v>s.max_depth-(i+1)||0>v)&&(v=s.max_depth-(i+1)),void 0))}),v},check_move:function(){if(!this.__call_old())return!1;var t,m=this._get_move(),s=m.rt._get_settings().types,mc=m.rt._check("max_children",m.cr),md=m.rt._check("max_depth",m.cr),vc=m.rt._check("valid_children",m.cr),ch=0,d=1;if("none"===vc)return!1;if($.isArray(vc)&&m.ot&&m.ot._get_type&&(m.o.each(function(){return-1===$.inArray(m.ot._get_type(this),vc)?(d=!1,!1):void 0}),d===!1))return!1;if(-2!==s.max_children&&-1!==mc&&(ch=-1===m.cr?this.get_container().children("> ul > li").not(m.o).length:m.cr.children("> ul > li").not(m.o).length,ch+m.o.length>mc))return!1;if(-2!==s.max_depth&&-1!==md){if(d=0,0===md)return!1;if(m.o.d===void 0){for(t=m.o;t.length>0;)t=t.find("> ul > li"),d++;m.o.d=d}if(0>md-m.o.d)return!1}return!0},create_node:function(obj,position,js,callback,is_loaded,skip_check){if(!skip_check&&(is_loaded||this._is_loaded(obj))){var ch,p=position&&position.match(/^before|after$/i)&&-1!==obj?this._get_parent(obj):this._get_node(obj),s=this._get_settings().types,mc=this._check("max_children",p),md=this._check("max_depth",p),vc=this._check("valid_children",p);if(js||(js={}),"none"===vc)return!1;if($.isArray(vc))if(js.attr&&js.attr[s.type_attr]){if(-1===$.inArray(js.attr[s.type_attr],vc))return!1}else js.attr||(js.attr={}),js.attr[s.type_attr]=vc[0];if(-2!==s.max_children&&-1!==mc&&(ch=-1===p?this.get_container().children("> ul > li").length:p.children("> ul > li").length,ch+1>mc))return!1;if(-2!==s.max_depth&&-1!==md&&0>md-1)return!1}return this.__call_old(!0,obj,position,js,callback,is_loaded,skip_check)}}})}(jQuery),function($){$.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(obj,s_call,e_call){var _this=this;this.load_node_html(obj,function(){_this.__callback({obj:obj}),s_call.call(this)},e_call)},_is_loaded:function(obj){return obj=this._get_node(obj),-1==obj||!obj||!this._get_settings().html_data.ajax||obj.is(".jstree-open, .jstree-leaf")||obj.children("ul").children("li").size()>0},load_node_html:function(obj,s_call,e_call){var d,s=this.get_settings().html_data,error_func=function(){},success_func=function(){};if(obj=this._get_node(obj),obj&&-1!==obj){if(obj.data("jstree-is-loading"))return;obj.data("jstree-is-loading",!0)}switch(!0){case!s.data&&!s.ajax:obj&&-1!=obj||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),s_call&&s_call.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!obj||-1===obj):obj&&-1!=obj||(d=$(s.data),d.is("ul")||(d=$("<ul>").append(d)),this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),s_call&&s_call.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&obj&&-1!==obj:obj=this._get_node(obj),error_func=function(x,t,e){var ef=this.get_settings().html_data.ajax.error;ef&&ef.call(this,x,t,e),-1!=obj&&obj.length?(obj.children(".jstree-loading").removeClass("jstree-loading"),obj.data("jstree-is-loading",!1),"success"===t&&s.correct_state&&obj.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")):"success"===t&&s.correct_state&&this.get_container().children("ul").empty(),e_call&&e_call.call(this)},success_func=function(d,t,x){var sf=this.get_settings().html_data.ajax.success;return sf&&(d=sf.call(this,d,t,x)||d),""==d?error_func.call(this,x,t,""):(d?(d=$(d),d.is("ul")||(d=$("<ul>").append(d)),-1!=obj&&obj?(obj.children(".jstree-loading").removeClass("jstree-loading"),obj.append(d).find("li, a").filter(function(){return"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),obj.data("jstree-is-loading",!1)):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(obj),s_call&&s_call.call(this)):obj&&-1!==obj?(obj.children(".jstree-loading").removeClass("jstree-loading"),obj.data("jstree-is-loading",!1),s.correct_state&&(obj.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),s_call&&s_call.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),s_call&&s_call.call(this)),void 0)},s.ajax.context=this,s.ajax.error=error_func,s.ajax.success=success_func,s.ajax.dataType||(s.ajax.dataType="html"),$.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,obj)),$.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,obj)),$.ajax(s.ajax)}}}}),$.jstree.defaults.plugins.push("html_data")}(jQuery),function($){$.jstree.plugin("themeroller",{__init:function(){var s=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").delegate("a","mouseenter.jstree",function(){$(this).addClass(s.item_h)}).delegate("a","mouseleave.jstree",function(){$(this).removeClass(s.item_h)}).bind("open_node.jstree create_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",$.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("ins").removeClass(s.opened).addClass(s.closed)},this)).bind("select_node.jstree",$.proxy(function(e,data){data.rslt.obj.children("a").addClass(s.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",$.proxy(function(){this.get_container().find("."+s.item_a).removeClass(s.item_a).end().find(".jstree-clicked").addClass(s.item_a)},this)).bind("move_node.jstree",$.proxy(function(e,data){this._themeroller(data.rslt.o)},this))},__destroy:function(){var s=this._get_settings().themeroller,c=["ui-icon"];$.each(s,function(i,v){v=v.split(" "),v.length&&(c=c.concat(v))}),this.get_container().removeClass("ui-widget-content").find("."+c.join(", .")).removeClass(c.join(" "))},_fn:{_themeroller:function(obj){var s=this._get_settings().themeroller;obj=obj&&-1!=obj?this._get_node(obj).parent():this.get_container(),obj.find("li.jstree-closed > ins.jstree-icon").removeClass(s.opened).addClass("ui-icon "+s.closed).end().find("li.jstree-open > ins.jstree-icon").removeClass(s.closed).addClass("ui-icon "+s.opened).end().find("a").addClass(s.item).children("ins.jstree-icon").addClass("ui-icon "+s.item_icon)}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_icon:"ui-icon-folder-collapsed"}}),$(function(){var css_string=".jstree .ui-icon { overflow:visible; } .jstree a { padding:0 2px; }";$.vakata.css.add_sheet({str:css_string})})}(jQuery);