"use strict";(function(e){e.vakata={},e.vakata.css={get_css:function(e,t,n){e=e.toLowerCase();var r=n.cssRules||n.rules,i=0;do{if(r.length&&i>r.length+5)return!1;if(r[i].selectorText&&r[i].selectorText.toLowerCase()==e)return t===!0?(n.removeRule&&n.removeRule(i),n.deleteRule&&n.deleteRule(i),!0):r[i]}while(r[++i]);return!1},add_css:function(t,n){return e.jstree.css.get_css(t,!1,n)?!1:(n.insertRule?n.insertRule(t+" { }",0):n.addRule(t,null,0),e.vakata.css.get_css(t))},remove_css:function(t,n){return e.vakata.css.get_css(t,!0,n)},add_sheet:function(e){var t;if(e.str)return t=document.createElement("style"),t.setAttribute("type","text/css"),t.styleSheet?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(n){}}}}})(jQuery),function(e){var t=[],n=-1,r={},i={},s=!1;e.fn.jstree=function(n){var i=typeof n=="string",s=Array.prototype.slice.call(arguments,1),o=this;return!i&&e.meta&&s.push(e.metadata.get(this).jstree),n=!i&&s.length?e.extend.apply(null,[!0,n].concat(s)):n,i&&n.substring(0,1)=="_"?o:(i?this.each(function(){var r=t[e.data(this,"jstree-instance-id")],i=r&&e.isFunction(r[n])?r[n].apply(r,s):r;if(typeof i!="undefined"&&(n.indexOf(!1)||i!==!0&&i!==!1))return o=i,!1}):this.each(function(){var i=e.data(this,"jstree-instance-id"),s=!1;typeof i!="undefined"&&t[i]&&t[i].destroy(),i=parseInt(t.push({}),10)-1,e.data(this,"jstree-instance-id",i),n||(n={}),n.plugins=e.isArray(n.plugins)?n.plugins:e.jstree.defaults.plugins,e.inArray("core",n.plugins)===-1&&n.plugins.unshift("core"),s=e.extend(!0,{},e.jstree.defaults,n),s.plugins=n.plugins,e.each(r,function(t,n){e.inArray(t,s.plugins)===-1&&(s[t]=null,delete s[t])}),t[i]=new e.jstree._instance(i,e(this).addClass("jstree jstree-"+i),s),e.each(t[i]._get_settings().plugins,function(e,n){t[i].data[n]={}}),e.each(t[i]._get_settings().plugins,function(e,n){r[n]&&r[n].__init.apply(t[i])}),t[i].init()}),o)},e.jstree={defaults:{plugins:[]},_focused:function(){return t[n]||null},_reference:function(n){if(t[n])return t[n];var r=e(n);return!r.length&&typeof n=="string"&&(r=e("#"+n)),r.length?t[r.closest(".jstree").data("jstree-instance-id")]||null:null},_instance:function(t,n,r){this.data={core:{}},this.get_settings=function(){return e.extend(!0,{},r)},this._get_settings=function(){return r},this.get_index=function(){return t},this.get_container=function(){return n},this._set_settings=function(t){r=e.extend(!0,{},r,t)}},_fn:{},plugin:function(t,n){n=e.extend({},{__init:e.noop,__destroy:e.noop,_fn:{},defaults:!1},n),r[t]=n,e.jstree.defaults[t]=n.defaults,e.each(n._fn,function(n,r){r.plugin=t,r.old=e.jstree._fn[n],e.jstree._fn[n]=function(){var t,i=r,s=Array.prototype.slice.call(arguments),o=new e.Event("before.jstree"),u=!1;do{if(i&&i.plugin&&e.inArray(i.plugin,this._get_settings().plugins)!==-1)break;i=i.old}while(i);if(!i)return;t=this.get_container().triggerHandler(o,{func:n,inst:this,args:s});if(t===!1)return;return typeof t!="undefined"&&(s=t),n.indexOf("_")===0?t=i.apply(this,s):t=i.apply(e.extend({},this,{__callback:function(e){this.get_container().triggerHandler(n+".jstree",{inst:this,args:s,rslt:e,rlbk:u})},__rollback:function(){return u=this.get_rollback(),u},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s),t},e.jstree._fn[n].old=r.old,e.jstree._fn[n].plugin=t})},rollback:function(n){n&&(e.isArray(n)||(n=[n]),e.each(n,function(e,n){t[n.i].set_rollback(n.h,n.d)}))}},e.jstree._fn=e.jstree._instance.prototype={},e(function(){var t=navigator.userAgent.toLowerCase(),n=(t.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";/msie/.test(t)&&parseInt(n,10)==6&&(s=!0,r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "),/msie/.test(t)&&parseInt(n,10)==7&&(r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),e.vakata.css.add_sheet({str:r})}),e.jstree.plugin("core",{__init:function(){this.data.core.to_open=e.map(e.makeArray(this.get_settings().core.initially_open),function(e){return"#"+e.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")})},defaults:{html_titles:!1,animation:500,initially_open:[],rtl:!1,strings:{loading:"Loading ...",new_node:"New node"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_settings().core.strings.loading+"</a></li></ul>"),this.data.core.li_height=this.get_container().find("ul li.jstree-closed, ul li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",e.proxy(function(t){var n=e(t.target);n.is("ins")&&t.pageY-n.offset().top<this.data.core.li_height&&this.toggle_node(n)},this)).bind("mousedown.jstree",e.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(n){}}}),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reopen()})},destroy:function(){var i,s=this.get_index(),o=this._get_settings(),u=this;e.each(o.plugins,function(e,t){try{r[t].__destroy.apply(u)}catch(n){}}),this.__callback();if(this.is_focused())for(i in t)if(t.hasOwnProperty(i)&&i!=s){t[i].set_focus();break}s===n&&(n=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")}),t[s]=null,delete t[s]},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container().find(".jstree-open").each(function(){e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/"))}),this.__callback(e.data.core.to_open)},reopen:function(t){var n=this,r=!0,i=[],s=[];t||(this.data.core.reopen=!1,this.data.core.refreshing=!0),this.data.core.to_open.length&&(e.each(this.data.core.to_open,function(t,n){if(n=="#")return!0;e(n).length&&e(n).is(".jstree-closed")?i.push(n):s.push(n)}),i.length&&(this.data.core.to_open=s,e.each(i,function(e,t){n.open_node(t,function(){n.reopen(!0)},!0)}),r=!1)),r&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){n.__callback({},n)},50),this.data.core.refreshing=!1)},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),e!==-1&&e.children("UL").remove(),this.load_node(e,function(){t.__callback({obj:e}),t.reopen()})},loaded:function(){this.__callback()},set_focus:function(){var t=e.jstree._focused();t&&t!==this&&t.get_container().removeClass("jstree-focused"),t!==this&&(this.get_container().addClass("jstree-focused"),n=this.get_index()),this.__callback()},is_focused:function(){return n==this.get_index()},_get_node:function(t){var n=e(t,this.get_container());return n.is(".jstree")||t==-1?-1:(n=n.closest("li",this.get_container()),n.length?n:!1)},_get_next:function(e,t){return e=this._get_node(e),e===-1?this.get_container().find("> ul > li:first-child"):e.length?t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(e,t){e=this._get_node(e);if(e===-1)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){e=e.prev("li").eq(0);while(e.hasClass("jstree-open"))e=e.children("ul:eq(0)").children("li:last");return e}var n=e.parentsUntil(".jstree","li:eq(0)");return n.length?n:!1},_get_parent:function(e){e=this._get_node(e);if(e==-1||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),e===-1?this.get_container().children("ul:eq(0)").children("li"):e.length?e.children("ul:eq(0)").children("li"):!1},get_path:function(e,t){var n=[],r=this;return e=this._get_node(e),e===-1||!e||!e.length?!1:(e.parentsUntil(".jstree","li").each(function(){n.push(t?this.id:r.get_text(this))}),n.reverse(),n.push(t?e.attr("id"):this.get_text(e)),n)},is_open:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-leaf")},open_node:function(e,t,n){e=this._get_node(e);if(!e.length)return!1;if(!e.hasClass("jstree-closed"))return t&&t.call(),!1;var r=n||s?0:this._get_settings().core.animation,i=this;this._is_loaded(e)?(r&&e.children("ul").css("display","none"),e.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),r&&e.children("ul").stop(!0).slideDown(r,function(){this.style.display=""}),this.__callback({obj:e}),t&&t.call()):(e.children("a").addClass("jstree-loading"),this.load_node(e,function(){i.open_node(e,t,n)},t))},close_node:function(e,t){e=this._get_node(e);var n=t||s?0:this._get_settings().core.animation;if(!e.length||!e.hasClass("jstree-open"))return!1;n&&e.children("ul").attr("style","display:block !important"),e.removeClass("jstree-open").addClass("jstree-closed"),n&&e.children("ul").stop(!0).slideUp(n,function(){this.style.display=""}),this.__callback({obj:e})},toggle_node:function(e){e=this._get_node(e);if(e.hasClass("jstree-closed"))return this.open_node(e);if(e.hasClass("jstree-open"))return this.close_node(e)},open_all:function(e,t){e=e?this._get_node(e):this.get_container();if(!e||e===-1)e=this.get_container();t?e=e.find("li.jstree-closed"):(t=e,e.is(".jstree-closed")?e=e.find("li.jstree-closed").andSelf():e=e.find("li.jstree-closed"));var n=this;e.each(function(){var e=this;n._is_loaded(this)?n.open_node(this,!1,!0):n.open_node(this,function(){n.open_all(e,t)},!0)}),t.find("li.jstree-closed").length===0&&this.__callback({obj:t})},close_all:function(e){var t=this;e=e?this._get_node(e):this.get_container();if(!e||e===-1)e=this.get_container();e.find("li.jstree-open").andSelf().each(function(){t.close_node(this)}),this.__callback({obj:e})},clean_node:function(t){t=t&&t!=-1?e(t):this.get_container(),t=t.is("li")?t.find("li").andSelf():t.find("li"),t.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),t.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:t})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e,t,n){this.__callback({obj:e})},_is_loaded:function(e){return!0},create_node:function(t,n,r,i,s){t=this._get_node(t),n=typeof n=="undefined"?"last":n;var o=e("<li>"),u=this._get_settings().core,a;if(t!==-1&&!t.length)return!1;if(!s&&!this._is_loaded(t))return this.load_node(t,function(){this.create_node(t,n,r,i,!0)}),!1;this.__rollback(),typeof r=="string"&&(r={data:r}),r||(r={}),r.attr&&o.attr(r.attr),r.state&&o.addClass("jstree-"+r.state),r.data||(r.data=u.strings.new_node),e.isArray(r.data)||(a=r.data,r.data=[],r.data.push(a)),e.each(r.data,function(t,n){a=e("<a>"),e.isFunction(n)&&(n=n.call(this,r)),typeof n=="string"?a.attr("href","#")[u.html_titles?"html":"text"](n):(n.attr||(n.attr={}),n.attr.href||(n.attr.href="#"),a.attr(n.attr)[u.html_titles?"html":"text"](n.title),n.language&&a.addClass(n.language)),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),n.icon&&(n.icon.indexOf("/")===-1?a.children("ins").addClass(n.icon):a.children("ins").css("background","url('"+n.icon+"') center center no-repeat")),o.append(a)}),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),t===-1&&(t=this.get_container(),n==="before"&&(n="first"),n==="after"&&(n="last"));switch(n){case"before":t.before(o),a=this._get_parent(t);break;case"after":t.after(o),a=this._get_parent(t);break;case"inside":case"first":t.children("ul").length||t.append("<ul>"),t.children("ul").prepend(o),a=t;break;case"last":t.children("ul").length||t.append("<ul>"),t.children("ul").append(o),a=t;break;default:t.children("ul").length||t.append("<ul>"),n||(n=0),a=t.children("ul").children("li").eq(n),a.length?a.before(o):t.children("ul").append(o),a=t}if(a===-1||a.get(0)===this.get_container().get(0))a=-1;return this.clean_node(a),this.__callback({obj:o,parent:a}),i&&i.call(this,o),o},get_text:function(e){e=this._get_node(e);if(!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return this.nodeType==3})[0],e.nodeValue)},set_text:function(e,t){e=this._get_node(e);if(!e.length)return!1;e=e.children("a:eq(0)");if(this._get_settings().core.html_titles){var n=e.children("INS").clone();return e.html(t).prepend(n),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){e=this._get_node(e);if(!e.length)return!1;this.__rollback();var t=this._get_parent(e),n=this._get_prev(e);return e=e.remove(),t!==-1&&t.find("> ul > li").length===0&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:n}),e},prepare_move:function(t,n,r,s,o){var u={};u.ot=e.jstree._reference(u.o)||this,u.o=u.ot._get_node(t),u.r=n===-1?-1:this._get_node(n),u.p=typeof u=="undefined"?"last":r;if(!o&&i.o&&i.o[0]===u.o[0]&&i.r[0]===u.r[0]&&i.p===u.p){this.__callback(i),s&&s.call(this,i);return}u.ot=e.jstree._reference(u.o)||this,u.rt=n===-1?u.ot:e.jstree._reference(u.r)||this;if(u.r===-1){u.cr=-1;switch(u.p){case"first":case"before":case"inside":u.cp=0;break;case"after":case"last":u.cp=u.rt.get_container().find(" > ul > li").length;break;default:u.cp=u.p}}else{if(!/^(before|after)$/.test(u.p)&&!this._is_loaded(u.r))return this.load_node(u.r,function(){this.prepare_move(t,n,r,s,!0)});switch(u.p){case"before":u.cp=u.r.index(),u.cr=u.rt._get_parent(u.r);break;case"after":u.cp=u.r.index()+1,u.cr=u.rt._get_parent(u.r);break;case"inside":case"first":u.cp=0,u.cr=u.r;break;case"last":u.cp=u.r.find(" > ul > li").length,u.cr=u.r;break;default:u.cp=u.p,u.cr=u.r}}u.np=u.cr==-1?u.rt.get_container():u.cr,u.op=u.ot._get_parent(u.o),u.or=u.np.find(" > ul > li:nth-child("+(u.cp+1)+")"),i=u,this.__callback(i),s&&s.call(this,i)},check_move:function(){var e=i,t=!0;return e.or[0]===e.o[0]?!1:(e.o.each(function(){if(e.r.parentsUntil(".jstree").andSelf().filter("li").index(this)!==-1)return t=!1,!1}),t)},move_node:function(t,n,r,s,o,u){if(!o)return this.prepare_move(t,n,r,function(e){this.move_node(e,!1,!1,s,!0,u)});if(!u&&!this.check_move())return!1;this.__rollback();var a=!1;s?(a=t.o.clone(),a.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):a=t.o,t.or.length?t.or.before(a):(t.np.children("ul").length||e("<ul>").appendTo(t.np),t.np.children("ul:eq(0)").append(a));try{t.ot.clean_node(t.op),t.rt.clean_node(t.np),t.op.find("> ul > li").length||t.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(f){}return s&&(i.cy=!0,i.oc=a),this.__callback(i),i},_get_move:function(){return i}}})}(jQuery),function(e){e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(e){e.preventDefault(),this.select_node(e.currentTarget,!0,e)},this)).delegate("a","mouseenter.jstree",e.proxy(function(e){this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(e){this.dehover_node(e.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,n){var r=this._get_settings().ui,i=this._get_node(n.rslt.obj),s=i&&i.length?i.children("ul").find(".jstree-clicked"):e(),o=this;if(r.selected_parent_close===!1||!s.length)return;s.each(function(){o.deselect_node(this),r.selected_parent_close==="select_parent"&&o.select_node(i)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var n=this._get_settings().ui.select_prev_on_delete,r=this._get_node(t.rslt.obj),i=r&&r.length?r.find(".jstree-clicked"):[],s=this;i.each(function(){s.deselect_node(this)}),n&&i.length&&this.select_node(t.rslt.prev)},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find(".jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",selected_parent_close:"select_parent",select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,n){if(typeof t=="undefined"||t===null)return n?this.data.ui.selected:this.data.ui.last_selected;var r=e(t,this.get_container());return r.is(".jstree")||t==-1?-1:(r=r.closest("li",this.get_container()),r.length?r:!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")}),this.deselect_all(),e.each(n,function(e,n){n&&n!=="#"&&t.select_node(n)}),this.__callback()},refresh:function(e){return this.save_selected(),this.__call_old()},hover_node:function(e){e=this._get_node(e);if(!e.length)return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered,t;if(!e||!e.length)return!1;t=e.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===t[0]&&(this.data.ui.hovered=null),this.__callback({obj:e})},select_node:function(e,t,n){e=this._get_node(e);if(e==-1||!e||!e.length)return!1;var r=this._get_settings().ui,i=r.select_multiple_modifier=="on"||r.select_multiple_modifier!==!1&&n&&n[r.select_multiple_modifier+"Key"],s=this.is_selected(e),o=!0;if(t){if(r.disable_selecting_children&&i&&e.parents("li",this.get_container()).children(".jstree-clicked").length)return!1;o=!1;switch(!0){case s&&!i:this.deselect_all(),s=!1,o=!0;break;case!s&&!i:if(r.select_limit==-1||r.select_limit>0)this.deselect_all(),o=!0;break;case s&&i:this.deselect_node(e);break;case!s&&i:if(r.select_limit==-1||this.data.ui.selected.length+1<=r.select_limit)o=!0}}o&&!s&&(e.children("a").addClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.add(e),this.data.ui.last_selected=e,this.__callback({obj:e}))},deselect_node:function(e){e=this._get_node(e);if(!e.length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},toggle_select:function(e){e=this._get_node(e);if(!e.length)return!1;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find(".jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){t?e(t).find(".jstree-clicked").removeClass("jstree-clicked"):this.get_container().find(".jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback()}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var n=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){n.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(e){return!0}}},_fn:{_show_input:function(t,n){t=this._get_node(t);var r=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),o=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,u=this.get_text(t),a=e("<div>",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),f=t.css("position","relative").append(e("<input>",{value:u,css:{padding:"0",border:"1px solid silver",position:"absolute",left:r?"auto":s+o+4+"px",right:r?s+o+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children("input"),r=e.val();r===""&&(r=u),e.remove(),this.set_text(t,u),this.rename_node(t,r),n.call(this,t,r,u),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(t==27){this.value=u,this.blur();return}if(t==13){this.blur();return}f.width(Math.min(a.text("pW"+this.value).width(),i))}})).children("input");this.set_text(t,""),a.css({fontFamily:f.css("fontFamily")||"",fontSize:f.css("fontSize")||"",fontWeight:f.css("fontWeight")||"",fontStyle:f.css("fontStyle")||"",fontStretch:f.css("fontStretch")||"",fontVariant:f.css("fontVariant")||"",letterSpacing:f.css("letterSpacing")||"",wordSpacing:f.css("wordSpacing")||""}),f.width(Math.min(a.text("pW"+f[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,n,r){t.call(this,{obj:e,new_name:n,old_name:r})})},create:function(t,n,r,i,s){var o,u=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),o=this.create_node(t,n,r,function(t){var n=this._get_parent(t),r=e(t).index();i&&i.call(this,t),n.length&&n.hasClass("jstree-closed")&&this.open_node(n,!1,!0),s?u.__callback({obj:t,name:this.get_text(t),parent:n,position:r}):this._show_input(t,function(e,t,i){u.__callback({obj:e,name:t,parent:n,position:r})})}),o},remove:function(e){e=this._get_node(e,!0),this.__rollback(),this.delete_node(e),this.__callback({obj:e})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return e.check_move.call(this,this._get_move())?!0:!1},move_node:function(e,t,n,r,i,s){var o=this._get_settings().crrm.move;if(!i)return n||(n=o.default_position),n==="inside"&&!o.default_position.match(/^(before|after)$/)&&(n=o.default_position),this.__call_old(!0,e,t,n,r,!1,s);if(o.always_copy===!0||o.always_copy==="multitree"&&e.rt.get_index()!==e.ot.get_index())r=!0;this.__call_old(!0,e,t,n,r,!0,s)},cut:function(e){e=this._get_node(e),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1;if(!e||!e.length)return!1;this.data.crrm.ct_nodes=e},copy:function(e){e=this._get_node(e),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1;if(!e||!e.length)return!1;this.data.crrm.cp_nodes=e},paste:function(e){e=this._get_node(e);if(!e||!e.length)return!1;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=!1}}}),e.jstree.defaults.plugins.push("crrm")}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(n,r){if(!n)return!1;r||(r=e.jstree._themes+n+"/style.css"),e.inArray(r,t)==-1&&(e.vakata.css.add_sheet({url:r,rel:"jstree"}),t.push(r)),this.data.themes.theme!=n&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=n),this.get_container().addClass("jstree-"+n),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function n(t,n){var r=e.jstree._focused(),i;if(r&&r.data&&r.data.hotkeys&&r.data.hotkeys.enabled){i=r._get_settings().hotkeys[t];if(i)return i.call(r,n)}}var t=[];e.jstree.plugin("hotkeys",{__init:function(){if(typeof e.hotkeys=="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(r,i){e.inArray(r,t)==-1&&(e(document).bind("keydown",r,function(e){return n(r,e)}),t.push(r))}),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e)return e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e)),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length)return e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e)),!1},space:function(){if(this.data.ui.hovered)return this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){e.type="click";if(this.data.ui.hovered)return this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1},_fn:{load_node:function(e,t,n){var r=this;this.load_node_json(e,function(){r.__callback({obj:e}),t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().json_data,r;return t=this._get_node(t),t&&t!==-1&&n.progressive_render&&!t.is(".jstree-open, .jstree-leaf")&&t.children("ul").children("li").length===0&&t.data("jstree-children")?(r=this._parse_json(t.data("jstree-children")),r&&(t.append(r),e.removeData(t,"jstree-children")),this.clean_node(t),!0):t==-1||!t||!n.ajax||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_json:function(t,n,r){var i=this.get_settings().json_data,s,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree-is-loading"))return;t.data("jstree-is-loading",!0)}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1)s=this._parse_json(i.data),s?(this.get_container().children("ul").empty().append(s.children()),this.clean_node()):i.correct_state&&this.get_container().children("ul").empty();n&&n.call(this);break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:o=function(e,n,s){var o=this.get_settings().json_data.ajax.error;o&&o.call(this,e,n,s),t!=-1&&t.length?(t.children(".jstree-loading").removeClass("jstree-loading"),t.data("jstree-is-loading",!1),n==="success"&&i.correct_state&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")):n==="success"&&i.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},u=function(r,s,u){var a=this.get_settings().json_data.ajax.success;a&&(r=a.call(this,r,s,u)||r);if(r===""||!e.isArray(r)&&!e.isPlainObject(r))return o.call(this,u,s,"");r=this._parse_json(r),r?(t===-1||!t?this.get_container().children("ul").empty().append(r.children()):(t.append(r).children(".jstree-loading").removeClass("jstree-loading"),t.data("jstree-is-loading",!1)),this.clean_node(t),n&&n.call(this)):t===-1||!t?i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)):(t.children(".jstree-loading").removeClass("jstree-loading"),t.data("jstree-is-loading",!1),i.correct_state&&(t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),n&&n.call(this)))},i.ajax.context=this,i.ajax.error=o,i.ajax.success=u,i.ajax.dataType||(i.ajax.dataType="json"),e.isFunction(i.ajax.url)&&(i.ajax.url=i.ajax.url.call(this,t)),e.isFunction(i.ajax.data)&&(i.ajax.data=i.ajax.data.call(this,t)),e.ajax(i.ajax)}},_parse_json:function(t,n){var r=!1,i=this._get_settings(),s=i.json_data,o=i.core.html_titles,u,a,f,l,c;if(!t)return r;e.isFunction(t)&&(t=t.call(this));if(e.isArray(t)){r=e();if(!t.length)return!1;for(a=0,f=t.length;a<f;a++)u=this._parse_json(t[a],!0),u.length&&(r=r.add(u))}else{typeof t=="string"&&(t={data:t});if(!t.data&&t.data!=="")return r;r=e("<li>"),t.attr&&r.attr(t.attr),t.metadata&&r.data("jstree",t.metadata),t.state&&r.addClass("jstree-"+t.state),e.isArray(t.data)||(u=t.data,t.data=[],t.data.push(u)),e.each(t.data,function(n,i){u=e("<a>"),e.isFunction(i)&&(i=i.call(this,t)),typeof i=="string"?u.attr("href","#")[o?"html":"text"](i):(i.attr||(i.attr={}),i.attr.href||(i.attr.href="#"),u.attr(i.attr)[o?"html":"text"](i.title),i.language&&u.addClass(i.language)),u.prepend("<ins class='jstree-icon'>&#160;</ins>"),!i.icon&&t.icon&&(i.icon=t.icon),i.icon&&
(i.icon.indexOf("/")===-1?u.children("ins").addClass(i.icon):u.children("ins").css("background","url('"+i.icon+"') center center no-repeat")),r.append(u)}),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(s.progressive_render&&t.state!=="open"?r.addClass("jstree-closed").data("jstree-children",t.children):(e.isFunction(t.children)&&(t.children=t.children.call(this,t)),e.isArray(t.children)&&t.children.length&&(u=this._parse_json(t.children,!0),u.length&&(c=e("<ul>"),c.append(u),r.append(c)))))}return n||(l=e("<ul>"),l.append(r),r=l),r},get_json:function(t,n,r,i){var s=[],o=this._get_settings(),u=this,a,f,l,c,h,p;t=this._get_node(t);if(!t||t===-1)t=this.get_container().find("> ul > li");return n=e.isArray(n)?n:["id","class"],!i&&this.data.types&&n.push(o.types.type_attr),r=e.isArray(r)?r:[],t.each(function(){l=e(this),a={data:[]},n.length&&(a.attr={}),e.each(n,function(e,t){f=l.attr(t),f&&f.length&&f.replace(/jstree[^ ]*|$/ig,"").length&&(a.attr[t]=f.replace(/jstree[^ ]*|$/ig,""))}),l.hasClass("jstree-open")&&(a.state="open"),l.hasClass("jstree-closed")&&(a.state="closed"),c=l.children("a"),c.each(function(){h=e(this),r.length||e.inArray("languages",o.plugins)!==-1||h.children("ins").get(0).style.backgroundImage.length||h.children("ins").get(0).className&&h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(p=!1,e.inArray("languages",o.plugins)!==-1&&e.isArray(o.languages)&&o.languages.length&&e.each(o.languages,function(e,t){if(h.hasClass(t))return p=t,!1}),f={attr:{},title:u.get_text(h,p)},e.each(r,function(e,t){a.attr[t]=(h.attr(t)||"").replace(/jstree[^ ]*|$/ig,"")}),e.each(o.languages,function(e,t){if(h.hasClass(t))return f.language=t,!0}),h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(f.icon=h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"")),h.children("ins").get(0).style.backgroundImage.length&&(f.icon=h.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):f=u.get_text(h),c.length>1?a.data.push(f):a.data=f}),l=l.find("> ul > li"),l.length&&(a.children=u.get_json(l,n,r,!0)),s.push(a)}),s}}})}(jQuery),function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var n=this._get_settings().languages,r=!1,i=".jstree-"+this.get_index()+" a";if(!e.isArray(n)||n.length===0)return!1;if(e.inArray(t,n)==-1){if(!n[t])return!1;t=n[t]}return t==this.data.languages.current_language?!0:(r=e.vakata.css.get_css(i+"."+this.data.languages.current_language,!1,this.data.languages.language_css),r!==!1&&(r.style.display="none"),r=e.vakata.css.get_css(i+"."+t,!1,this.data.languages.language_css),r!==!1&&(r.style.display=""),this.data.languages.current_language=t,this.__callback(t),!0)},get_lang:function(){return this.data.languages.current_language},get_text:function(t,n){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size())return!1;var r=this._get_settings().languages,i=this._get_settings().core.html_titles;return e.isArray(r)&&r.length?(n=n&&e.inArray(n,r)!=-1?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),i?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return this.nodeType==3})[0],t.nodeValue)},set_text:function(t,n,r){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size())return!1;var i=this._get_settings().languages,s=this._get_settings().core.html_titles,o;return e.isArray(i)&&i.length?(r=r&&e.inArray(r,i)!=-1?r:this.data.languages.current_language,t=t.children("a."+r)):t=t.children("a:eq(0)"),s?(o=t.children("INS").clone(),t.html(n).prepend(o),this.__callback({obj:t,name:n,lang:r}),!0):(t=t.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:t,name:n,lang:r}),t.nodeValue=n)},_load_css:function(){var t=this._get_settings().languages,n="/* languages css */",r=".jstree-"+this.get_index()+" a",i;if(e.isArray(t)&&t.length){this.data.languages.current_language=t[0];for(i=0;i<t.length;i++)n+=r+"."+t[i]+" {",t[i]!=this.data.languages.current_language&&(n+=" display:none; "),n+=" } ";this.data.languages.language_css=e.vakata.css.add_sheet({str:n})}},create_node:function(t,n,r,i){var s=this.__call_old(!0,t,n,r,function(t){var n=this._get_settings().languages,r=t.children("a"),s;if(e.isArray(n)&&n.length){for(s=0;s<n.length;s++)r.is("."+n[s])||t.append(r.eq(0).clone().removeClass(n.join(" ")).addClass(n[s]));r.not("."+n.join(", .")).remove()}i&&i.call(this,t)});return s}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var n=this._get_node(t.rslt.obj);n=n===-1?this.get_container().children("ul"):n.children("ul"),this.sort(n)},this)).bind("rename_node.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var n=t.rslt.np==-1?this.get_container():t.rslt.np;this.sort(n.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var n=this._get_settings().sort,r=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(n,r))),t.find("> li > ul").each(function(){r.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked,this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_checkboxes()},this)).delegate("a","click.jstree",e.proxy(function(e){this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.save_selected(),this.data.cookies&&this.save_cookie("select_node"),e.preventDefault()},this))},__destroy:function(){this.get_container().find(".jstree-checkbox").remove()},_fn:{_prepare_checkboxes:function(t){t=!t||t==-1?this.get_container():this._get_node(t);var n,r=this,i;t.each(function(){i=e(this),n=i.is("li")&&i.hasClass("jstree-checked")?"jstree-checked":"jstree-unchecked",i.find("a").not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(n)}),t.is("li")?this._repair_state(t):t.find("> ul > li").each(function(){r._repair_state(this)})},change_state:function(t,n){t=this._get_node(t),n=n===!1||n===!0?n:t.hasClass("jstree-checked"),n?t.find("li").andSelf().removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"):(t.find("li").andSelf().removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t),t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(n){if(t.children("ul").children(".jstree-checked, .jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked")}else{if(t.children("ul").children(".jstree-unchecked, .jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked")}}),this.data.ui&&(this.data.ui.selected=this.get_checked()),this.__callback(t)},check_node:function(e){this.change_state(e,!1)},uncheck_node:function(e){this.change_state(e,!0)},check_all:function(){var e=this;this.get_container().children("ul").children("li").each(function(){e.check_node(this,!1)})},uncheck_all:function(){var e=this;this.get_container().children("ul").children("li").each(function(){e.change_state(this,!0)})},is_checked:function(e){return e=this._get_node(e),e.length?e.is(".jstree-checked"):!1},get_checked:function(e){return e=!e||e===-1?this.get_container():this._get_node(e),e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e){return e=!e||e===-1?this.get_container():this._get_node(e),e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){e=this._get_node(e).first();if(!e.length)return;var t=e.find("> ul > .jstree-checked").length,n=e.find("> ul > .jstree-undetermined").length,r=e.find("> ul > li").length;r===0?e.hasClass("jstree-undetermined")&&this.check_node(e):t===0&&n===0?this.uncheck_node(e):t===r?this.check_node(e):e.parentsUntil(".jstree","li").removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined")},reselect:function(){if(this.data.ui){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")}),this.deselect_all(),e.each(n,function(e,n){t.check_node(n)}),this.__callback()}}}})}(jQuery),function(e){e.jstree.plugin("types",{__init:function(){var t=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",e.proxy(function(){var n=t.types,r=t.type_attr,i="",o=this;e.each(n,function(t,n){e.each(n,function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||o.data.types.attach_to.push(e)});if(!n.icon)return!0;if(n.icon.image||n.icon.position)t=="default"?i+=".jstree-"+o.get_index()+" a > .jstree-icon { ":i+=".jstree-"+o.get_index()+" li["+r+"="+t+"] > a > .jstree-icon { ",n.icon.image&&(i+=" background-image:url("+n.icon.image+"); "),n.icon.position?i+=" background-position:"+n.icon.position+"; ":i+=" background-position:0 0; ",i+="} "}),i!=""&&e.vakata.css.add_sheet({str:i})},this)).bind("before.jstree",e.proxy(function(t,n){if(e.inArray(n.func,this.data.types.attach_to)!==-1){var r=this._get_settings().types.types,i=this._get_type(n.args[0]);if((r[i]&&typeof r[i][n.func]!="undefined"||r["default"]&&typeof r["default"][n.func]!="undefined")&&!this._check(n.func,n.args[0]))return t.stopImmediatePropagation(),!1}},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_get_type:function(e){return e=this._get_node(e),!e||!e.length?!1:e.attr(this._get_settings().types.type_attr)||"default"},set_type:function(e,t){return t=this._get_node(t),!t.length||!e?!1:t.attr(this._get_settings().types.type_attr,e)},_check:function(t,n,r){var i=!1,s=this._get_type(n),o=0,u=this,a=this._get_settings().types;if(n===-1){if(!a[t])return;i=a[t]}else{if(s===!1)return;!a.types[s]||!a.types[s][t]?!!a.types["default"]&&!!a.types["default"][t]&&(i=a.types["default"][t]):i=a.types[s][t]}return e.isFunction(i)&&(i=i.call(this,n)),t==="max_depth"&&n!==-1&&r!==!1&&a.max_depth!==-2&&i!==0&&this._get_node(n).children("a:eq(0)").parentsUntil(".jstree","li").each(function(e){if(a.max_depth!==-1&&a.max_depth-(e+1)<=0)return i=0,!1;o=e===0?i:u._check(t,this,!1);if(o!==-1&&o-(e+1)<=0)return i=0,!1;o>=0&&(o-(e+1)<i||i<0)&&(i=o-(e+1)),a.max_depth>=0&&(a.max_depth-(e+1)<i||i<0)&&(i=a.max_depth-(e+1))}),i},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),n=t.rt._get_settings().types,r=t.rt._check("max_children",t.cr),i=t.rt._check("max_depth",t.cr),s=t.rt._check("valid_children",t.cr),o=0,u=1,a;if(s==="none")return!1;if(e.isArray(s)&&t.ot&&t.ot._get_type){t.o.each(function(){if(e.inArray(t.ot._get_type(this),s)===-1)return u=!1,!1});if(u===!1)return!1}if(n.max_children!==-2&&r!==-1){o=t.cr===-1?this.get_container().children("> ul > li").not(t.o).length:t.cr.children("> ul > li").not(t.o).length;if(o+t.o.length>r)return!1}if(n.max_depth!==-2&&i!==-1){u=0;if(i===0)return!1;if(typeof t.o.d=="undefined"){a=t.o;while(a.length>0)a=a.find("> ul > li"),u++;t.o.d=u}if(i-t.o.d<0)return!1}return!0},create_node:function(t,n,r,i,s,o){if(!o&&(s||this._is_loaded(t))){var u=n&&n.match(/^before|after$/i)&&t!==-1?this._get_parent(t):this._get_node(t),a=this._get_settings().types,f=this._check("max_children",u),l=this._check("max_depth",u),c=this._check("valid_children",u),h;r||(r={});if(c==="none")return!1;if(e.isArray(c))if(!r.attr||!r.attr[a.type_attr])r.attr||(r.attr={}),r.attr[a.type_attr]=c[0];else if(e.inArray(r.attr[a.type_attr],c)===-1)return!1;if(a.max_children!==-2&&f!==-1){h=u===-1?this.get_container().children("> ul > li").length:u.children("> ul > li").length;if(h+1>f)return!1}if(a.max_depth!==-2&&l!==-1&&l-1<0)return!1}return this.__call_old(!0,t,n,r,i,s,o)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,n){var r=this;this.load_node_html(e,function(){r.__callback({obj:e}),t.call(this)},n)},_is_loaded:function(e){return e=this._get_node(e),e==-1||!e||!this._get_settings().html_data.ajax||e.is(".jstree-open, .jstree-leaf")||e.children("ul").children("li").size()>0},load_node_html:function(t,n,r){var i,s=this.get_settings().html_data,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree-is-loading"))return;t.data("jstree-is-loading",!0)}switch(!0){case!s.data&&!s.ajax:if(!t||t==-1)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();n&&n.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||t===-1):if(!t||t==-1)i=e(s.data),i.is("ul")||(i=e("<ul>").append(i)),this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();n&&n.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&t!==-1:t=this._get_node(t),o=function(e,n,i){var o=this.get_settings().html_data.ajax.error;o&&o.call(this,e,n,i),t!=-1&&t.length?(t.children(".jstree-loading").removeClass("jstree-loading"),t.data("jstree-is-loading",!1),n==="success"&&s.correct_state&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")):n==="success"&&s.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},u=function(r,i,u){var a=this.get_settings().html_data.ajax.success;a&&(r=a.call(this,r,i,u)||r);if(r=="")return o.call(this,u,i,"");r?(r=e(r),r.is("ul")||(r=e("<ul>").append(r)),t==-1||!t?this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(t.children(".jstree-loading").removeClass("jstree-loading"),t.append(r).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.data("jstree-is-loading",!1)),this.clean_node(t),n&&n.call(this)):t&&t!==-1?(t.children(".jstree-loading").removeClass("jstree-loading"),t.data("jstree-is-loading",!1),s.correct_state&&(t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},s.ajax.context=this,s.ajax.error=o,s.ajax.success=u,s.ajax.dataType||(s.ajax.dataType="html"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").delegate("a","mouseenter.jstree",function(){e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("ins").removeClass(t.opened).addClass(t.closed)},this)).bind("select_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(e,n){this.get_container().find("."+t.item_a).removeClass(t.item_a).end().find(".jstree-clicked").addClass(t.item_a)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o)},this))},__destroy:function(){var t=this._get_settings().themeroller,n=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(n=n.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+n.join(", .")).removeClass(n.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=!e||e==-1?this.get_container():this._get_node(e).parent(),e.find("li.jstree-closed > ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().find("li.jstree-open > ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().find("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon "+t.item_icon)}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_icon:"ui-icon-folder-collapsed"}}),e(function(){var t=".jstree .ui-icon { overflow:visible; } .jstree a { padding:0 2px; }";e.vakata.css.add_sheet({str:t})})}(jQuery);