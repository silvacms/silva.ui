(function(e,t){var n={ShortcutManager:function(e){var n={},r={},i=[],s=0,o=!1,u=function(){return i.length?i[s]:null},a=function(){var e=u();return e?r[e]:null},f=function(){var e=u();return e?n[e]:{}},l={create:function(e,t,o){r[e]==undefined&&(r[e]=t,i.push(e),n[e]={},o&&(l.disable(!0),s=i.length-1,l.activate()))},remove:function(o,a){if(r[o]!=undefined)if(a==undefined)u()==o&&(l.disable(),s=0),i.splice(t.inArray(o,i),1),delete r[o],delete n[o];else if(n[o][a]!=undefined&&u()==o){for(var f in n[o][a])f&&t(e).unbind("keydown",n[o][a][f]);delete n[o][a]}},bind:function(r,i,s,o){var a=u()===r;i==undefined&&(i="default");for(var f=0;f<s.length;f++){var l=s[f];n[r][i]==undefined&&(n[r][i]={}),n[r][i][l]=o,a&&t(e).bind("keydown",l,o)}},activate:function(n){if(!o){var r=f(),i=a();n&&(t(e).focus(),i.addClass("focus"),i.trigger("focus-keyboard"));for(var s in r)if(s)for(var u in r[s])u&&t(e).bind("keydown",u,r[s][u]);o=!0}},disable:function(n){if(o){var r=f(),i=a();for(var s in r)if(s)for(var u in r[s])u&&t(e).unbind("keydown",r[s][u]);n&&(i.trigger("blur-keyboard"),i.removeClass("focus")),o=!1}}},c=function(e){return function(t){if(i.length){l.disable(!0),s=(s+e)%i.length,s<0&&(s=i.length-1),l.activate(!0);var n=a();return n.addClass("highlight"),setTimeout(function(){n.removeClass("highlight")},1e3),!1}}};return t(e).bind("keydown","ctrl+shift+left",c(-1)),t(e).bind("keydown","ctrl+shift+right",c(1)),t(e).bind("keydown","ctrl+left",c(-1)),t(e).bind("keydown","ctrl+right",c(1)),l}};e.keyboard=n})(infrae,jQuery);