<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      tal:attributes="lang view.lang | nothing;
                      xml:lang view.lang | nothing"
      tal:define="imgs_url static.img()"
      i18n:domain="silva">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"/>
    <title>Silva</title>

    <link rel="apple-touch-icon" href="${imgs_url}/apple-touch-icon.png" />

    <tal:resource tal:replace="structure provider:resources" />

  </head>

  <body>
    <div id="loading-message">
      <p i18n:translate="">Loading ...</p>
    </div>
    <div id="notifications">
    </div>
    <div id="header">
      <h1><a class="home"><img src="${imgs_url}/silva.png" alt="Silva" /></a></h1>
      <ol>
        <li tal:condition="view.can_manage">
          <a href="${view.root_url}/manage_main"
             i18n:translate="">
            Manage
          </a>
        </li>
        <li><a href="#"
               i18n:translate="">Settings</a></li>
        <li><a href="#"
               i18n:translate="">Logout</a></li>
      </ol>
    </div>
    <div id="main">
      <div id="navigation">
        <h2 i18n:translate="">Structure</h2>
        <div class="tree"></div>
      </div>
      <div id="workspace">
        <div class="info">
          <h3 i18n:translate="">Loading...</h3>
          <ol class="tabs"></ol>
          <ol class="actions"></ol>
          <a href="#" id="content-url"></a>
        </div>
        <div class="content"></div>
      </div>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
      smi = $('body').SMI({
          url: "${view.root_url}/{path}/++rest++silva.ui.{tab}",
          header: {
              selector: "#header"
          },
          navigation: {
              selector: "#navigation",
              url: "${view.root_url}/{path}/++rest++silva.ui.navigation"
          },
          workspace: {
              selector: "#workspace",
              url: "${view.root_url}/{path}"
          },
          notifications: {
              selector: "#notifications",
              url: "${view.root_url}/++rest++silva.ui.poll.notifications"
          },
          listing: {
              configuration: "${view.root_url}/++rest++silva.ui.listing.configuration",
              template: "${view.root_url}/++rest++silva.ui.listing.template"
          },
          editor: {
              configuration: "${view.root_url}/++rest++silva.core.editor.configuration"
          }
      });
      });
    </script>
  </body>
</html>
