<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      tal:attributes="lang view.lang | nothing;
                      xml:lang view.lang | nothing"
      tal:define="imgs_url static.img()"
      i18n:domain="silva">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"/>
    <meta name="generator" content="Silva" />
    <title tal:content="context.get_title_or_id()">Silva</title>

    <link rel="shortcut icon" href="${imgs_url}/silva.ico" />
    <link rel="apple-touch-icon" href="${imgs_url}/apple-touch-icon.png" />

    <tal:resource tal:replace="structure provider:resources" />

  </head>

  <body>
    <div id="loading-message">
      <img src="${imgs_url}/loader.gif" alt="Loading data from server"
           i18n:attributes="alt" />
    </div>
    <div id="notifications">
    </div>
    <div id="main">
      <nav id="navigation">
        <h1 i18n:translate="">
          <a href="#!/"><img src="${imgs_url}/silva.png" alt="Silva" /></a>
        </h1>
        <div class="tree"></div>
        <ol class="actions session-actions">
          <li>
            <a href="${view.root_url}/service_members/logout"
               i18n:translate="">
              Logout
            </a>
          </li>
          <li>
            <a class="form-popup"
               href="${view.root_url}/++rest++silva.core.smi.userpreferences"
               i18n:translate="">
              User preferences
            </a>
          </li>
        </ol>
      </nav>
      <div id="workspace">
        <div class="info">
          <ol class="actions admin-actions">
            <li>
              <a class="parent open-screen tool ui-state-default" href="" rel="">
                <ins class="ui-icon ui-icon-arrowreturnthick-1-n"></ins>
              </a>
            </li>
          </ol>
          <ol class="tabs content-tabs"></ol>
          <ol class="actions view-actions"></ol>
          <h2>
            <ins class="icon loading"></ins>
            <tal:msg i18n:translate="">Loading...</tal:msg>
          </h2>
          <ol class="actions content-actions"></ol>
          <a href="#" id="content-url"></a>
        </div>
        <div class="content"></div>
      </div>
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
      smi = $('body').SMI({
          screen: "${view.root_url}/{path}/++rest++silva.ui/{screen}",
          action:"${view.root_url}/{path}/++rest++silva.ui.actions.{action}",
          errors: {
              401: {
                ifaces: ['message'],
                title: '<tal:msg i18n:translate="">Unauthorized</tal:msg>',
                message: '<p i18n:translate="">You need to login with higher credentials in order to access this content or screen.</p>'
              },
              403: {
                ifaces: ['message'],
                title: '<tal:msg i18n:translate="">Forbidden</tal:msg>',
                message: '<p i18n:translate="">You don\'t have access to this content or screen.</p>'
              },
              404: {
                ifaces: ['message'],
                title: '<tal:msg i18n:translate="">Not found</tal:msg>',
                message: '<p i18n:translate="">The request content or screen was not found.</p>'
              },
              500: {
                ifaces: ['message'],
                title: '<tal:msg i18n:translate="">An error happened</tal:msg>',
                message: '<p i18n:translate="">An error happened on the server. Please consult your system administrator for more information.</p>'
              }
          },
          navigation: {
              selector: "#navigation",
              url: "${view.root_url}/{path}/++rest++silva.ui.navigation",
              parents_url: "${view.root_url}/{path}/++rest++parents"
          },
          workspace: {
              selector: "#workspace",
              url: "${view.root_url}/{path}"
          },
          notifications: {
              selector: "#notifications",
              url: "${view.root_url}/++rest++silva.ui.poll.notifications"
          },
          listing: {
              configuration: "${view.root_url}/++rest++silva.ui.listing.configuration",
              action: "${view.root_url}/{path}/++rest++silva.ui.listing.{action}",
              template: "${view.root_url}/++rest++silva.ui.listing.template"
          },
          editor: {
              configuration: "${view.root_url}/++rest++silva.core.editor.configuration"
          }
      });
      });
    </script>
  </body>
</html>
